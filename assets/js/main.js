function FastClick(a){"use strict";var b,c=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=a,!a||!a.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(c,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(c,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(c,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(c,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(c,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(c,arguments)},FastClick.notNeeded(a)||(this.deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(b=a.onclick,a.addEventListener("click",function(a){b(a)},!1),a.onclick=null))}function __(a){return Garp.locale[a]||a}!function(a){"use strict";a.picturefillOptions={selector:"picturefill-background",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%"},a.picturefill=function(){for(var b=a.document.getElementsByClassName(a.picturefillOptions.selector),c=0,d=b.length;d>c;c++){for(var e=b[c].getElementsByTagName("span"),f=[],g=0,h=e.length;h>g;g++){var i=e[g].getAttribute("data-media");(!i||a.matchMedia&&a.matchMedia(i).matches)&&f.push(e[g])}f.length&&(b[c].style.backgroundImage="url("+f.pop().getAttribute("data-src")+")",b[c].style.backgroundSize=a.picturefillOptions.backgroundSize,b[c].style.backgroundRepeat=a.picturefillOptions.backgroundRepeat,b[c].style.backgroundPosition=a.picturefillOptions.backgroundPosition)}},a.addEventListener?(a.addEventListener("load",a.picturefill,!1),a.addEventListener("resize",a.picturefill,!1),a.addEventListener("DOMContentLoaded",function(){a.picturefill(),a.removeEventListener("load",a.picturefill,!1)},!1)):a.attachEvent&&a.attachEvent("onload",a.picturefill)}(this),function(a,b){"use strict";function c(){e.READY||(t.determineEventTypes(),s.each(e.gestures,function(a){v.register(a)}),t.onTouch(e.DOCUMENT,o,v.detect),t.onTouch(e.DOCUMENT,p,v.detect),e.READY=!0)}function d(a,c){Date.now||(Date.now=function(){return(new Date).getTime()}),a.utils.each(["on","off"],function(d){a.utils[d]=function(a,e,f){c(a)[d](e,function(a){var d=c.extend({},a.originalEvent,a);d.button===b&&(d.button=a.which-1),f.call(this,d)})}}),a.Instance.prototype.trigger=function(a,b){var d=c(this.element);return d.has(b.target).length&&(d=c(b.target)),d.trigger({type:a,gesture:b})},c.fn.hammer=function(b){return this.each(function(){var d=c(this),e=d.data("hammer");e?e&&b&&a.utils.extend(e.options,b):d.data("hammer",new a(this,b||{}))})}}var e=function w(a,b){return new w.Instance(a,b||{})};e.VERSION="1.1.3",e.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},e.DOCUMENT=document,e.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,e.HAS_TOUCHEVENTS="ontouchstart"in a,e.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),e.NO_MOUSEEVENTS=e.HAS_TOUCHEVENTS&&e.IS_MOBILE||e.HAS_POINTEREVENTS,e.CALCULATE_INTERVAL=25;var f={},g=e.DIRECTION_DOWN="down",h=e.DIRECTION_LEFT="left",i=e.DIRECTION_UP="up",j=e.DIRECTION_RIGHT="right",k=e.POINTER_MOUSE="mouse",l=e.POINTER_TOUCH="touch",m=e.POINTER_PEN="pen",n=e.EVENT_START="start",o=e.EVENT_MOVE="move",p=e.EVENT_END="end",q=e.EVENT_RELEASE="release",r=e.EVENT_TOUCH="touch";e.READY=!1,e.plugins=e.plugins||{},e.gestures=e.gestures||{};var s=e.utils={extend:function(a,c,d){for(var e in c)!c.hasOwnProperty(e)||a[e]!==b&&d||(a[e]=c[e]);return a},on:function(a,b,c){a.addEventListener(b,c,!1)},off:function(a,b,c){a.removeEventListener(b,c,!1)},each:function(a,c,d){var e,f;if("forEach"in a)a.forEach(c,d);else if(a.length!==b){for(e=0,f=a.length;f>e;e++)if(c.call(d,a[e],e,a)===!1)return}else for(e in a)if(a.hasOwnProperty(e)&&c.call(d,a[e],e,a)===!1)return},inStr:function(a,b){return a.indexOf(b)>-1},inArray:function(a,b){if(a.indexOf){var c=a.indexOf(b);return-1===c?!1:c}for(var d=0,e=a.length;e>d;d++)if(a[d]===b)return d;return!1},toArray:function(a){return Array.prototype.slice.call(a,0)},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){var b=[],c=[],d=[],e=[],f=Math.min,g=Math.max;return 1===a.length?{pageX:a[0].pageX,pageY:a[0].pageY,clientX:a[0].clientX,clientY:a[0].clientY}:(s.each(a,function(a){b.push(a.pageX),c.push(a.pageY),d.push(a.clientX),e.push(a.clientY)}),{pageX:(f.apply(Math,b)+g.apply(Math,b))/2,pageY:(f.apply(Math,c)+g.apply(Math,c))/2,clientX:(f.apply(Math,d)+g.apply(Math,d))/2,clientY:(f.apply(Math,e)+g.apply(Math,e))/2})},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.clientX-a.clientX,d=b.clientY-a.clientY;return 180*Math.atan2(d,c)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.clientX-b.clientX),d=Math.abs(a.clientY-b.clientY);return c>=d?a.clientX-b.clientX>0?h:j:a.clientY-b.clientY>0?i:g},getDistance:function(a,b){var c=b.clientX-a.clientX,d=b.clientY-a.clientY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==i||a==g},setPrefixedCss:function(a,b,c,d){var e=["","Webkit","Moz","O","ms"];b=s.toCamelCase(b);for(var f=0;f<e.length;f++){var g=b;if(e[f]&&(g=e[f]+g.slice(0,1).toUpperCase()+g.slice(1)),g in a.style){a.style[g]=(null==d||d)&&c||"";break}}},toggleBehavior:function(a,b,c){if(b&&a&&a.style){s.each(b,function(b,d){s.setPrefixedCss(a,d,b,c)});var d=c&&function(){return!1};"none"==b.userSelect&&(a.onselectstart=d),"none"==b.userDrag&&(a.ondragstart=d)}},toCamelCase:function(a){return a.replace(/[_-]([a-z])/g,function(a){return a[1].toUpperCase()})}};e.Instance=function(a,b){var d=this;c(),this.element=a,this.enabled=!0,s.each(b,function(a,c){delete b[c],b[s.toCamelCase(c)]=a}),this.options=s.extend(s.extend({},e.defaults),b||{}),this.options.behavior&&s.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=t.onTouch(a,n,function(a){d.enabled&&a.eventType==n?v.startDetect(d,a):a.eventType==r&&v.detect(a)}),this.eventHandlers=[]},e.Instance.prototype={on:function(a,b){var c=this;return t.on(c.element,a,b,function(a){c.eventHandlers.push({gesture:a,handler:b})}),c},off:function(a,b){var c=this;return t.off(c.element,a,b,function(a){var d=s.inArray({gesture:a,handler:b});d!==!1&&c.eventHandlers.splice(d,1)}),c},trigger:function(a,b){b||(b={});var c=e.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var d=this.element;return s.hasParent(b.target,d)&&(d=b.target),d.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this},dispose:function(){var a,b;for(s.toggleBehavior(this.element,this.options.behavior,!1),a=-1;b=this.eventHandlers[++a];)s.off(this.element,b.gesture,b.handler);return this.eventHandlers=[],t.off(this.element,f[n],this.eventStartHandler),null}};var t=e.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(a,b,c,d){var e=b.split(" ");s.each(e,function(b){s.on(a,b,c),d&&d(b)})},off:function(a,b,c,d){var e=b.split(" ");s.each(e,function(b){s.off(a,b,c),d&&d(b)})},onTouch:function(a,b,c){var d=this,g=function(f){var g,h=f.type.toLowerCase(),i=e.HAS_POINTEREVENTS,j=s.inStr(h,"mouse");j&&d.preventMouseEvents||(j&&b==n&&0===f.button?(d.preventMouseEvents=!1,d.shouldDetect=!0):i&&b==n?d.shouldDetect=1===f.buttons||u.matchType(l,f):j||b!=n||(d.preventMouseEvents=!0,d.shouldDetect=!0),i&&b!=p&&u.updatePointer(b,f),d.shouldDetect&&(g=d.doDetect.call(d,f,b,a,c)),g==p&&(d.preventMouseEvents=!1,d.shouldDetect=!1,u.reset()),i&&b==p&&u.updatePointer(b,f))};return this.on(a,f[b],g),g},doDetect:function(a,b,c,d){var e=this.getTouchList(a,b),f=e.length,g=b,h=e.trigger,i=f;b==n?h=r:b==p&&(h=q,i=e.length-(a.changedTouches?a.changedTouches.length:1)),i>0&&this.started&&(g=o),this.started=!0;var j=this.collectEventData(c,g,e,a);return b!=p&&d.call(v,j),h&&(j.changedLength=i,j.eventType=h,d.call(v,j),j.eventType=g,delete j.changedLength),g==p&&(d.call(v,j),this.started=!1),g},determineEventTypes:function(){var b;return b=e.HAS_POINTEREVENTS?a.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:e.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],f[n]=b[0],f[o]=b[1],f[p]=b[2],f},getTouchList:function(a,b){if(e.HAS_POINTEREVENTS)return u.getTouchList();if(a.touches){if(b==o)return a.touches;var c=[],d=[].concat(s.toArray(a.touches),s.toArray(a.changedTouches)),f=[];return s.each(d,function(a){s.inArray(c,a.identifier)===!1&&f.push(a),c.push(a.identifier)}),f}return a.identifier=1,[a]},collectEventData:function(a,b,c,d){var e=l;return s.inStr(d.type,"mouse")||u.matchType(k,d)?e=k:u.matchType(m,d)&&(e=m),{center:s.getCenter(c),timeStamp:Date.now(),target:d.target,touches:c,eventType:b,pointerType:e,srcEvent:d,preventDefault:function(){var a=this.srcEvent;a.preventManipulation&&a.preventManipulation(),a.preventDefault&&a.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return v.stopDetect()}}}},u=e.PointerEvent={pointers:{},getTouchList:function(){var a=[];return s.each(this.pointers,function(b){a.push(b)}),a},updatePointer:function(a,b){a==p||a!=p&&1!==b.buttons?delete this.pointers[b.pointerId]:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b)},matchType:function(a,b){if(!b.pointerType)return!1;var c=b.pointerType,d={};return d[k]=c===(b.MSPOINTER_TYPE_MOUSE||k),d[l]=c===(b.MSPOINTER_TYPE_TOUCH||l),d[m]=c===(b.MSPOINTER_TYPE_PEN||m),d[a]},reset:function(){this.pointers={}}},v=e.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:s.extend({},b),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);var b=this.current.inst,c=b.options;return s.each(this.gestures,function(d){!this.stopped&&b.enabled&&c[d.name]&&d.handler.call(d,a,b)},this),this.current&&(this.current.lastEvent=a),a.eventType==p&&this.stopDetect(),a}},stopDetect:function(){this.previous=s.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(a,b,c,d,f){var g=this.current,h=!1,i=g.lastCalcEvent,j=g.lastCalcData;i&&a.timeStamp-i.timeStamp>e.CALCULATE_INTERVAL&&(b=i.center,c=a.timeStamp-i.timeStamp,d=a.center.clientX-i.center.clientX,f=a.center.clientY-i.center.clientY,h=!0),(a.eventType==r||a.eventType==q)&&(g.futureCalcEvent=a),(!g.lastCalcEvent||h)&&(j.velocity=s.getVelocity(c,d,f),j.angle=s.getAngle(b,a.center),j.direction=s.getDirection(b,a.center),g.lastCalcEvent=g.futureCalcEvent||a,g.futureCalcEvent=a),a.velocityX=j.velocity.x,a.velocityY=j.velocity.y,a.interimAngle=j.angle,a.interimDirection=j.direction},extendEventData:function(a){var b=this.current,c=b.startEvent,d=b.lastEvent||c;(a.eventType==r||a.eventType==q)&&(c.touches=[],s.each(a.touches,function(a){c.touches.push({clientX:a.clientX,clientY:a.clientY})}));var e=a.timeStamp-c.timeStamp,f=a.center.clientX-c.center.clientX,g=a.center.clientY-c.center.clientY;return this.getCalculatedData(a,d.center,e,f,g),s.extend(a,{startEvent:c,deltaTime:e,deltaX:f,deltaY:g,distance:s.getDistance(c.center,a.center),angle:s.getAngle(c.center,a.center),direction:s.getDirection(c.center,a.center),scale:s.getScale(c.touches,a.touches),rotation:s.getRotation(c.touches,a.touches)}),a},register:function(a){var c=a.defaults||{};return c[a.name]===b&&(c[a.name]=!0),s.extend(e.defaults,c,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}};!function(a){function b(b,d){var e=v.current;if(!(d.options.dragMaxTouches>0&&b.touches.length>d.options.dragMaxTouches))switch(b.eventType){case n:c=!1;break;case o:if(b.distance<d.options.dragMinDistance&&e.name!=a)return;var f=e.startEvent.center;if(e.name!=a&&(e.name=a,d.options.dragDistanceCorrection&&b.distance>0)){var k=Math.abs(d.options.dragMinDistance/b.distance);f.pageX+=b.deltaX*k,f.pageY+=b.deltaY*k,f.clientX+=b.deltaX*k,f.clientY+=b.deltaY*k,b=v.extendEventData(b)}(e.lastEvent.dragLockToAxis||d.options.dragLockToAxis&&d.options.dragLockMinDistance<=b.distance)&&(b.dragLockToAxis=!0);var l=e.lastEvent.direction;b.dragLockToAxis&&l!==b.direction&&(b.direction=s.isVertical(l)?b.deltaY<0?i:g:b.deltaX<0?h:j),c||(d.trigger(a+"start",b),c=!0),d.trigger(a,b),d.trigger(a+b.direction,b);var m=s.isVertical(b.direction);(d.options.dragBlockVertical&&m||d.options.dragBlockHorizontal&&!m)&&b.preventDefault();break;case q:c&&b.changedLength<=d.options.dragMaxTouches&&(d.trigger(a+"end",b),c=!1);break;case p:c=!1}}var c=!1;e.gestures.Drag={name:a,index:50,handler:b,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),e.gestures.Gesture={name:"gesture",index:1337,handler:function(a,b){b.trigger(this.name,a)}},function(a){function b(b,d){var e=d.options,f=v.current;switch(b.eventType){case n:clearTimeout(c),f.name=a,c=setTimeout(function(){f&&f.name==a&&d.trigger(a,b)},e.holdTimeout);break;case o:b.distance>e.holdThreshold&&clearTimeout(c);break;case q:clearTimeout(c)}}var c;e.gestures.Hold={name:a,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:b}}("hold"),e.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==q&&b.trigger(this.name,a)}},e.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(a,b){if(a.eventType==q){var c=a.touches.length,d=b.options;if(c<d.swipeMinTouches||c>d.swipeMaxTouches)return;(a.velocityX>d.swipeVelocityX||a.velocityY>d.swipeVelocityY)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},function(a){function b(b,d){var e,f,g=d.options,h=v.current,i=v.previous;switch(b.eventType){case n:c=!1;break;case o:c=c||b.distance>g.tapMaxDistance;break;case p:!s.inStr(b.srcEvent.type,"cancel")&&b.deltaTime<g.tapMaxTime&&!c&&(e=i&&i.lastEvent&&b.timeStamp-i.lastEvent.timeStamp,f=!1,i&&i.name==a&&e&&e<g.doubleTapInterval&&b.distance<g.doubleTapDistance&&(d.trigger("doubletap",b),f=!0),(!f||g.tapAlways)&&(h.name=a,d.trigger(h.name,b)))}}var c=!1;e.gestures.Tap={name:a,index:100,handler:b,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),e.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(a,b){return b.options.preventMouse&&a.pointerType==k?void a.stopDetect():(b.options.preventDefault&&a.preventDefault(),void(a.eventType==r&&b.trigger("touch",a)))}},function(a){function b(b,d){switch(b.eventType){case n:c=!1;break;case o:if(b.touches.length<2)return;var e=Math.abs(1-b.scale),f=Math.abs(b.rotation);if(e<d.options.transformMinScale&&f<d.options.transformMinRotation)return;v.current.name=a,c||(d.trigger(a+"start",b),c=!0),d.trigger(a,b),f>d.options.transformMinRotation&&d.trigger("rotate",b),e>d.options.transformMinScale&&(d.trigger("pinch",b),d.trigger("pinch"+(b.scale<1?"in":"out"),b));break;case q:c&&b.changedLength<2&&(d.trigger(a+"end",b),c=!1)}}var c=!1;e.gestures.Transform={name:a,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:b}}("transform"),a.Hammer=e,"undefined"!=typeof module&&module.exports&&(module.exports=e),"function"==typeof define&&define.amd?define(["jquery"],function(b){return d(a.Hammer,b)}):d(a.Hammer,a.jQuery||a.Zepto)}(window),function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f="undefined"==typeof console?b:function(a){};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],c):c(a.jQuery)}(window),function(a){function b(a){return RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define("classie/classie",g):a.classie=g}(window),function(a){function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return b}):"object"==typeof exports?module.exports=b:a.getStyleProperty=b}(window),function(a){function b(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b}function c(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=g.length;c>b;b++){var d=g[b];a[d]=0}return a}function d(a){function d(a){if("string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var d=f(a);if("none"===d.display)return c();var e={};e.width=a.offsetWidth,e.height=a.offsetHeight;for(var k=e.isBorderBox=!(!j||!d[j]||"border-box"!==d[j]),l=0,m=g.length;m>l;l++){var n=g[l],o=d[n];o=h(a,o);var p=parseFloat(o);e[n]=isNaN(p)?0:p}var q=e.paddingLeft+e.paddingRight,r=e.paddingTop+e.paddingBottom,s=e.marginLeft+e.marginRight,t=e.marginTop+e.marginBottom,u=e.borderLeftWidth+e.borderRightWidth,v=e.borderTopWidth+e.borderBottomWidth,w=k&&i,x=b(d.width);x!==!1&&(e.width=x+(w?0:q+u));var y=b(d.height);return y!==!1&&(e.height=y+(w?0:r+v)),e.innerWidth=e.width-(q+u),e.innerHeight=e.height-(r+v),e.outerWidth=e.width+s,e.outerHeight=e.height+t,e}}function h(a,b){if(e||-1===b.indexOf("%"))return b;var c=a.style,d=c.left,f=a.runtimeStyle,g=f&&f.left;return g&&(f.left=a.currentStyle.left),c.left=b,b=c.pixelLeft,c.left=d,g&&(f.left=g),b}var i,j=a("boxSizing");return function(){if(j){var a=document.createElement("div");a.style.width="200px",a.style.padding="1px 2px 3px 4px",a.style.borderStyle="solid",a.style.borderWidth="1px 2px 3px 4px",a.style[j]="border-box";var c=document.body||document.documentElement;c.appendChild(a);var d=f(a);i=200===b(d.width),c.removeChild(a)}}(),d}var e=a.getComputedStyle,f=e?function(a){return e(a,null)}:function(a){return a.currentStyle},g=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],d):"object"==typeof exports?module.exports=d(require("get-style-property")):a.getSize=d(a.getStyleProperty)}(window),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):"object"==typeof exports?module.exports=f:a.eventie=f}(this),function(a){function b(a){"function"==typeof a&&(b.isReady?a():f.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==e.readyState;if(!b.isReady&&!c){b.isReady=!0;for(var d=0,g=f.length;g>d;d++){var h=f[d];h()}}}function d(d){return d.bind(e,"DOMContentLoaded",c),d.bind(e,"readystatechange",c),d.bind(a,"load",c),b}var e=a.document,f=[];b.isReady=!1,"function"==typeof define&&define.amd?(b.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],d)):a.docReady=d(a.eventie)}(this),function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;a.length>b;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;a.length>b;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:this.EventEmitter=a}.call(this),function(a,b){function c(a,b){return a[h](b)}function d(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function e(a,b){d(a);for(var c=a.parentNode.querySelectorAll(b),e=0,f=c.length;f>e;e++)if(c[e]===a)return!0;return!1}function f(a,b){return d(a),c(a,b)}var g,h=function(){if(b.matchesSelector)return"matchesSelector";for(var a=["webkit","moz","ms","o"],c=0,d=a.length;d>c;c++){var e=a[c],f=e+"MatchesSelector";if(b[f])return f}}();if(h){var i=document.createElement("div"),j=c(i,"div");g=j?c:f}else g=e;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return g}):window.matchesSelector=g}(this,Element.prototype),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){for(var b in a)return!1;return b=null,!0}function d(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function e(a,e,f){function h(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}var i=f("transition"),j=f("transform"),k=i&&j,l=!!f("perspective"),m={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[i],n=["transform","transition","transitionDuration","transitionProperty"],o=function(){for(var a={},b=0,c=n.length;c>b;b++){var d=n[b],e=f(d);e&&e!==d&&(a[d]=e)}return a}();b(h.prototype,a.prototype),h.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},h.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},h.prototype.getSize=function(){this.size=e(this.element)},h.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=o[c]||c;b[d]=a[c]}},h.prototype.getPosition=function(){var a=g(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=parseInt(a[c?"left":"right"],10),f=parseInt(a[d?"top":"bottom"],10);e=isNaN(e)?0:e,f=isNaN(f)?0:f;var h=this.layout.size;e-=c?h.paddingLeft:h.paddingRight,f-=d?h.paddingTop:h.paddingBottom,this.position.x=e,this.position.y=f},h.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={};b.isOriginLeft?(c.left=this.position.x+a.paddingLeft+"px",c.right=""):(c.right=this.position.x+a.paddingRight+"px",c.left=""),b.isOriginTop?(c.top=this.position.y+a.paddingTop+"px",c.bottom=""):(c.bottom=this.position.y+a.paddingBottom+"px",c.top=""),this.css(c),this.emitEvent("layout",[this])};var p=l?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};h.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return void this.layoutPosition();var h=a-c,i=b-d,j={},k=this.layout.options;h=k.isOriginLeft?h:-h,i=k.isOriginTop?i:-i,j.transform=p(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},h.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},h.prototype.moveTo=k?h.prototype._transitionTo:h.prototype.goTo,h.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},h.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},h.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(a);var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var q=j&&d(j)+",opacity";h.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:q,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(m,this,!1))},h.prototype.transition=h.prototype[i?"_transition":"_nonTransition"],h.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},h.prototype.onotransitionend=function(a){this.ontransitionend(a)};var r={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};h.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,d=r[a.propertyName]||a.propertyName;if(delete b.ingProperties[d],c(b.ingProperties)&&this.disableTransition(),d in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[d]),d in b.onEnd){var e=b.onEnd[d];e.call(this),delete b.onEnd[d]}this.emitEvent("transitionEnd",[this])}},h.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(m,this,!1),this.isTransitioning=!1},h.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var s={transitionProperty:"",transitionDuration:""};return h.prototype.removeTransitionStyles=function(){this.css(s)},h.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},h.prototype.remove=function(){if(!i||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var a=this;this.on("transitionEnd",function(){return a.removeElem(),!0}),this.hide()},h.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},h.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},h.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},h}var f=document.defaultView,g=f&&f.getComputedStyle?function(a){return f.getComputedStyle(a,null)}:function(a){return a.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],e):(a.Outlayer={},a.Outlayer.Item=e(a.EventEmitter,a.getSize,a.getStyleProperty))}(window),function(a){function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return"[object Array]"===l.call(a)}function d(a){var b=[];if(c(a))b=a;else if(a&&"number"==typeof a.length)for(var d=0,e=a.length;e>d;d++)b.push(a[d]);else b.push(a);return b}function e(a,b){var c=n(b,a);-1!==c&&b.splice(c,1)}function f(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()}function g(c,g,l,n,o,p){function q(a,c){if("string"==typeof a&&(a=h.querySelector(a)),!a||!m(a))return void(i&&i.error("Bad "+this.constructor.namespace+" element: "+a));this.element=a,this.options=b({},this.options),this.option(c);var d=++s;this.element.outlayerGUID=d,t[d]=this,this._create(),this.options.isInitLayout&&this.layout()
}function r(a,c){a.prototype[c]=b({},q.prototype[c])}var s=0,t={};return q.namespace="outlayer",q.Item=p,q.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},b(q.prototype,l.prototype),q.prototype.option=function(a){b(this.options,a)},q.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),b(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},q.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},q.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},q.prototype._filterFindItemElements=function(a){a=d(a);for(var b=this.options.itemSelector,c=[],e=0,f=a.length;f>e;e++){var g=a[e];if(m(g))if(b){o(g,b)&&c.push(g);for(var h=g.querySelectorAll(b),i=0,j=h.length;j>i;i++)c.push(h[i])}else c.push(g)}return c},q.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},q.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},q.prototype._init=q.prototype.layout,q.prototype._resetLayout=function(){this.getSize()},q.prototype.getSize=function(){this.size=n(this.element)},q.prototype._getMeasurement=function(a,b){var c,d=this.options[a];d?("string"==typeof d?c=this.element.querySelector(d):m(d)&&(c=d),this[a]=c?n(c)[b]:d):this[a]=0},q.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},q.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},q.prototype._layoutItems=function(a,b){function c(){d.emitEvent("layoutComplete",[d,a])}var d=this;if(!a||!a.length)return void c();this._itemsOn(a,"layout",c);for(var e=[],f=0,g=a.length;g>f;f++){var h=a[f],i=this._getItemLayoutPosition(h);i.item=h,i.isInstant=b||h.isLayoutInstant,e.push(i)}this._processLayoutQueue(e)},q.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},q.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},q.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},q.prototype._postLayout=function(){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))},q.prototype._getContainerSize=k,q.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},q.prototype._itemsOn=function(a,b,c){function d(){return e++,e===f&&c.call(g),!0}for(var e=0,f=a.length,g=this,h=0,i=a.length;i>h;h++){var j=a[h];j.on(b,d)}},q.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},q.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},q.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},q.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e(d,this.stamps),this.unignore(d)}},q.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=d(a)):void 0},q.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},q.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},q.prototype._manageStamp=k,q.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,d=n(a),e={left:b.left-c.left-d.marginLeft,top:b.top-c.top-d.marginTop,right:c.right-b.right-d.marginRight,bottom:c.bottom-b.bottom-d.marginBottom};return e},q.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},q.prototype.bindResize=function(){this.isResizeBound||(c.bind(a,"resize",this),this.isResizeBound=!0)},q.prototype.unbindResize=function(){c.unbind(a,"resize",this),this.isResizeBound=!1},q.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},q.prototype.resize=function(){var a=n(this.element),b=this.size&&a;b&&a.innerWidth===this.size.innerWidth||this.layout()},q.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},q.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},q.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},q.prototype.reveal=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.reveal()}},q.prototype.hide=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++){var d=a[c];d.hide()}},q.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},q.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c],f=this.getItem(e);f&&b.push(f)}return b}},q.prototype.remove=function(a){a=d(a);var b=this.getItems(a);if(b&&b.length){this._itemsOn(b,"remove",function(){this.emitEvent("removeComplete",[this,b])});for(var c=0,f=b.length;f>c;c++){var g=b[c];g.remove(),e(g,this.items)}}},q.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];d.destroy()}this.unbindResize(),delete this.element.outlayerGUID,j&&j.removeData(this.element,this.constructor.namespace)},q.data=function(a){var b=a&&a.outlayerGUID;return b&&t[b]},q.create=function(a,c){function d(){q.apply(this,arguments)}return Object.create?d.prototype=Object.create(q.prototype):b(d.prototype,q.prototype),d.prototype.constructor=d,r(d,"options"),b(d.prototype.options,c),d.namespace=a,d.data=q.data,d.Item=function(){p.apply(this,arguments)},d.Item.prototype=new p,g(function(){for(var b=f(a),c=h.querySelectorAll(".js-"+b),e="data-"+b+"-options",g=0,k=c.length;k>g;g++){var l,m=c[g],n=m.getAttribute(e);try{l=n&&JSON.parse(n)}catch(o){i&&i.error("Error parsing "+e+" on "+m.nodeName.toLowerCase()+(m.id?"#"+m.id:"")+": "+o);continue}var p=new d(m,l);j&&j.data(m,a,p)}}),j&&j.bridget&&j.bridget(a,d),d},q.Item=p,q}var h=a.document,i=a.console,j=a.jQuery,k=function(){},l=Object.prototype.toString,m="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},n=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],g):a.Outlayer=g(a.eventie,a.docReady,a.EventEmitter,a.getSize,a.matchesSelector,a.Outlayer.Item)}(window),function(a){function b(){function a(b){for(var c in a.defaults)this[c]=a.defaults[c];for(c in b)this[c]=b[c]}return c.Rect=a,a.defaults={x:0,y:0,width:0,height:0},a.prototype.contains=function(a){var b=a.width||0,c=a.height||0;return this.x<=a.x&&this.y<=a.y&&this.x+this.width>=a.x+b&&this.y+this.height>=a.y+c},a.prototype.overlaps=function(a){var b=this.x+this.width,c=this.y+this.height,d=a.x+a.width,e=a.y+a.height;return d>this.x&&b>a.x&&e>this.y&&c>a.y},a.prototype.getMaximalFreeRects=function(b){if(!this.overlaps(b))return!1;var c,d=[],e=this.x+this.width,f=this.y+this.height,g=b.x+b.width,h=b.y+b.height;return this.y<b.y&&(c=new a({x:this.x,y:this.y,width:this.width,height:b.y-this.y}),d.push(c)),e>g&&(c=new a({x:g,y:this.y,width:e-g,height:this.height}),d.push(c)),f>h&&(c=new a({x:this.x,y:h,width:this.width,height:f-h}),d.push(c)),this.x<b.x&&(c=new a({x:this.x,y:this.y,width:b.x-this.x,height:this.height}),d.push(c)),d},a.prototype.canFit=function(a){return this.width>=a.width&&this.height>=a.height},a}var c=a.Packery=function(){};"function"==typeof define&&define.amd?define("packery/js/rect",b):(a.Packery=a.Packery||{},a.Packery.Rect=b())}(window),function(a){function b(a){function b(a,b,c){this.width=a||0,this.height=b||0,this.sortDirection=c||"downwardLeftToRight",this.reset()}b.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var b=new a({x:0,y:0,width:this.width,height:this.height});this.spaces.push(b),this.sorter=c[this.sortDirection]||c.downwardLeftToRight},b.prototype.pack=function(a){for(var b=0,c=this.spaces.length;c>b;b++){var d=this.spaces[b];if(d.canFit(a)){this.placeInSpace(a,d);break}}},b.prototype.placeInSpace=function(a,b){a.x=b.x,a.y=b.y,this.placed(a)},b.prototype.placed=function(a){for(var c=[],d=0,e=this.spaces.length;e>d;d++){var f=this.spaces[d],g=f.getMaximalFreeRects(a);g?c.push.apply(c,g):c.push(f)}this.spaces=c,b.mergeRects(this.spaces),this.spaces.sort(this.sorter)},b.mergeRects=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];if(d){var e=a.slice(0);e.splice(b,1);for(var f=0,g=0,h=e.length;h>g;g++){var i=e[g],j=b>g?0:1;d.contains(i)&&(a.splice(g+j-f,1),f++)}}}return a};var c={downwardLeftToRight:function(a,b){return a.y-b.y||a.x-b.x},rightwardTopToBottom:function(a,b){return a.x-b.x||a.y-b.y}};return b}if("function"==typeof define&&define.amd)define("packery/js/packer",["./rect"],b);else{var c=a.Packery=a.Packery||{};c.Packer=b(c.Rect)}}(window),function(a){function b(a,b,c){var d=a("transform"),e=function(){b.Item.apply(this,arguments)};e.prototype=new b.Item;var f=e.prototype._create;return e.prototype._create=function(){f.call(this),this.rect=new c,this.placeRect=new c},e.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&d&&(this.element.style[d]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},e.prototype.dragMove=function(a,b){this.didDrag=!0;var c=this.layout.size;a-=c.paddingLeft,b-=c.paddingTop,this.positionPlaceRect(a,b)},e.prototype.dragStop=function(){this.getPosition();var a=this.position.x!==this.placeRect.x,b=this.position.y!==this.placeRect.y;this.needsPositioning=a||b,this.didDrag=!1},e.prototype.positionPlaceRect=function(a,b,c){this.placeRect.x=this.getPlaceRectCoord(a,!0),this.placeRect.y=this.getPlaceRectCoord(b,!1,c)},e.prototype.getPlaceRectCoord=function(a,b,c){var d=b?"Width":"Height",e=this.size["outer"+d],f=this.layout[b?"columnWidth":"rowHeight"],g=this.layout.size["inner"+d];b||(g=Math.max(g,this.layout.maxY),this.layout.rowHeight||(g-=this.layout.gutter));var h;if(f){f+=this.layout.gutter,g+=b?this.layout.gutter:0,a=Math.round(a/f);var i;i=this.layout.options.isHorizontal?b?"ceil":"floor":b?"floor":"ceil";var j=Math[i](g/f);j-=Math.ceil(e/f),h=j}else h=g-e;return a=c?a:Math.min(a,h),a*=f||1,Math.max(0,a)},e.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},e}"function"==typeof define&&define.amd?define("packery/js/item",["get-style-property/get-style-property","outlayer/outlayer","./rect"],b):a.Packery.Item=b(a.getStyleProperty,a.Outlayer,a.Packery.Rect)}(window),function(a){function b(a,b,c,d,e,f){function g(a,b){return a.position.y-b.position.y||a.position.x-b.position.x}function h(a,b){return a.position.x-b.position.x||a.position.y-b.position.y}var i=c.create("packery");return i.Item=f,i.prototype._create=function(){c.prototype._create.call(this),this.packer=new e,this.stamp(this.options.stamped);var a=this;this.handleDraggabilly={dragStart:function(b){a.itemDragStart(b.element)},dragMove:function(b){a.itemDragMove(b.element,b.position.x,b.position.y)},dragEnd:function(b){a.itemDragEnd(b.element)}},this.handleUIDraggable={start:function(b){a.itemDragStart(b.currentTarget)},drag:function(b,c){a.itemDragMove(b.currentTarget,c.position.left,c.position.top)},stop:function(b){a.itemDragEnd(b.currentTarget)}}},i.prototype._resetLayout=function(){this.getSize(),this._getMeasurements();var a=this.packer;this.options.isHorizontal?(a.width=Number.POSITIVE_INFINITY,a.height=this.size.innerHeight+this.gutter,a.sortDirection="rightwardTopToBottom"):(a.width=this.size.innerWidth+this.gutter,a.height=Number.POSITIVE_INFINITY,a.sortDirection="downwardLeftToRight"),a.reset(),this.maxY=0,this.maxX=0},i.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},i.prototype._getItemLayoutPosition=function(a){return this._packItem(a),a.rect},i.prototype._packItem=function(a){this._setRectSize(a.element,a.rect),this.packer.pack(a.rect),this._setMaxXY(a.rect)},i.prototype._setMaxXY=function(a){this.maxX=Math.max(a.x+a.width,this.maxX),this.maxY=Math.max(a.y+a.height,this.maxY)},i.prototype._setRectSize=function(a,c){var d=b(a),e=d.outerWidth,f=d.outerHeight,g=this.columnWidth+this.gutter,h=this.rowHeight+this.gutter;e=this.columnWidth?Math.ceil(e/g)*g:e+this.gutter,f=this.rowHeight?Math.ceil(f/h)*h:f+this.gutter,c.width=Math.min(e,this.packer.width),c.height=f},i.prototype._getContainerSize=function(){return this.options.isHorizontal?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},i.prototype._manageStamp=function(a){var b,c=this.getItem(a);if(c&&c.isPlacing)b=c.placeRect;else{var e=this._getElementOffset(a);b=new d({x:this.options.isOriginLeft?e.left:e.right,y:this.options.isOriginTop?e.top:e.bottom})}this._setRectSize(a,b),this.packer.placed(b),this._setMaxXY(b)},i.prototype.sortItemsByPosition=function(){var a=this.options.isHorizontal?h:g;this.items.sort(a)},i.prototype.fit=function(a,b,c){var d=this.getItem(a);d&&(this._getMeasurements(),this.stamp(d.element),d.getSize(),d.isPlacing=!0,b=void 0===b?d.rect.x:b,c=void 0===c?d.rect.y:c,d.positionPlaceRect(b,c,!0),this._bindFitEvents(d),d.moveTo(d.placeRect.x,d.placeRect.y),this.layout(),this.unstamp(d.element),this.sortItemsByPosition(),d.isPlacing=!1,d.copyPlaceRectPosition())},i.prototype._bindFitEvents=function(a){function b(){d++,2===d&&c.emitEvent("fitComplete",[c,a])}var c=this,d=0;a.on("layout",function(){return b(),!0}),this.on("layoutComplete",function(){return b(),!0})},i.prototype.resize=function(){var a=b(this.element),c=this.size&&a,d=this.options.isHorizontal?"innerHeight":"innerWidth";c&&a[d]===this.size[d]||this.layout()},i.prototype.itemDragStart=function(a){this.stamp(a);var b=this.getItem(a);b&&b.dragStart()},i.prototype.itemDragMove=function(a,b,c){function d(){f.layout(),delete f.dragTimeout}var e=this.getItem(a);e&&e.dragMove(b,c);var f=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(d,40)},i.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},i.prototype.itemDragEnd=function(b){var c,d=this.getItem(b);if(d&&(c=d.didDrag,d.dragStop()),!d||!c&&!d.needsPositioning)return void this.unstamp(b);a.add(d.element,"is-positioning-post-drag");var e=this._getDragEndLayoutComplete(b,d);d.needsPositioning?(d.on("layout",e),d.moveTo(d.placeRect.x,d.placeRect.y)):d&&d.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",e),this.layout()},i.prototype._getDragEndLayoutComplete=function(b,c){var d=c&&c.needsPositioning,e=0,f=d?2:1,g=this;return function(){return e++,e!==f?!0:(c&&(a.remove(c.element,"is-positioning-post-drag"),c.isPlacing=!1,c.copyPlaceRectPosition()),g.unstamp(b),g.sortItemsByPosition(),d&&g.emitEvent("dragItemPositioned",[g,c]),!0)}},i.prototype.bindDraggabillyEvents=function(a){a.on("dragStart",this.handleDraggabilly.dragStart),a.on("dragMove",this.handleDraggabilly.dragMove),a.on("dragEnd",this.handleDraggabilly.dragEnd)},i.prototype.bindUIDraggableEvents=function(a){a.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},i.Rect=d,i.Packer=e,i}"function"==typeof define&&define.amd?define(["classie/classie","get-size/get-size","outlayer/outlayer","packery/js/rect","packery/js/packer","packery/js/item"],b):a.Packery=b(a.classie,a.getSize,a.Outlayer,a.Packery.Rect,a.Packery.Packer,a.Packery.Item)}(window),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){"use strict";return this.deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(a){"use strict";var b;this.deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],this.deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<200&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},FastClick.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),this.deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||this.deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.deviceIsIOS4&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;this.deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b,c;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===a.style.msTouchAction?!0:!1},FastClick.attach=function(a){"use strict";return new FastClick(a)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},b=[].slice;!function(a,b){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(c){return b(c,a)}):b(a.jQuery,a)}(this,function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return e=c(d),l=a.call(d,"ontouchstart")>=0,h={horizontal:{},vertical:{}},i=1,k={},j="waypoints-context-id",o="resize.waypoints",p="scroll.waypoints",q=1,r="waypoints-waypoint-ids",s="waypoint",t="waypoints",f=function(){function a(a){var b=this;this.$element=a,this.element=a[0],this.didResize=!1,this.didScroll=!1,this.id="context"+i++,this.oldScroll={x:a.scrollLeft(),y:a.scrollTop()},this.waypoints={horizontal:{},vertical:{}},a.data(j,this.id),k[this.id]=this,a.bind(p,function(){var a;return b.didScroll||l?void 0:(b.didScroll=!0,a=function(){return b.doScroll(),b.didScroll=!1},d.setTimeout(a,c[t].settings.scrollThrottle))}),a.bind(o,function(){var a;return b.didResize?void 0:(b.didResize=!0,a=function(){return c[t]("refresh"),b.didResize=!1},d.setTimeout(a,c[t].settings.resizeThrottle))})}return a.prototype.doScroll=function(){var a,b=this;return a={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!l||a.vertical.oldScroll&&a.vertical.newScroll||c[t]("refresh"),c.each(a,function(a,d){var e,f,g;return g=[],f=d.newScroll>d.oldScroll,e=f?d.forward:d.backward,c.each(b.waypoints[a],function(a,b){var c,e;return d.oldScroll<(c=b.offset)&&c<=d.newScroll?g.push(b):d.newScroll<(e=b.offset)&&e<=d.oldScroll?g.push(b):void 0}),g.sort(function(a,b){return a.offset-b.offset}),f||g.reverse(),c.each(g,function(a,b){return b.options.continuous||a===g.length-1?b.trigger([e]):void 0})}),this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}},a.prototype.refresh=function(){var a,b,d,e=this;return d=c.isWindow(this.element),b=this.$element.offset(),this.doScroll(),a={horizontal:{contextOffset:d?0:b.left,contextScroll:d?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:d?0:b.top,contextScroll:d?0:this.oldScroll.y,contextDimension:d?c[t]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},c.each(a,function(a,b){return c.each(e.waypoints[a],function(a,d){var e,f,g,h,i;return e=d.options.offset,g=d.offset,f=c.isWindow(d.element)?0:d.$element.offset()[b.offsetProp],c.isFunction(e)?e=e.apply(d.element):"string"==typeof e&&(e=parseFloat(e),d.options.offset.indexOf("%")>-1&&(e=Math.ceil(b.contextDimension*e/100))),d.offset=f-b.contextOffset+b.contextScroll-e,d.options.onlyOnScroll&&null!=g||!d.enabled?void 0:null!==g&&g<(h=b.oldScroll)&&h<=d.offset?d.trigger([b.backward]):null!==g&&g>(i=b.oldScroll)&&i>=d.offset?d.trigger([b.forward]):null===g&&b.oldScroll>=d.offset?d.trigger([b.forward]):void 0})})},a.prototype.checkEmpty=function(){return c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([o,p].join(" ")),delete k[this.id]):void 0},a}(),g=function(){function a(a,b,d){var e,f;d=c.extend({},c.fn[s].defaults,d),"bottom-in-view"===d.offset&&(d.offset=function(){var a;return a=c[t]("viewportHeight"),c.isWindow(b.element)||(a=b.$element.height()),a-c(this).outerHeight()}),this.$element=a,this.element=a[0],this.axis=d.horizontal?"horizontal":"vertical",this.callback=d.handler,this.context=b,this.enabled=d.enabled,this.id="waypoints"+q++,this.offset=null,this.options=d,b.waypoints[this.axis][this.id]=this,h[this.axis][this.id]=this,e=null!=(f=a.data(r))?f:[],e.push(this.id),a.data(r,e)}return a.prototype.trigger=function(a){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,a),this.options.triggerOnce?this.destroy():void 0):void 0},a.prototype.disable=function(){return this.enabled=!1},a.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},a.prototype.destroy=function(){return delete h[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},a.getWaypointsByElement=function(a){var b,d;return(d=c(a).data(r))?(b=c.extend({},h.horizontal,h.vertical),c.map(d,function(a){return b[a]})):[]},a}(),n={init:function(a,b){var d;return null==b&&(b={}),null==(d=b.handler)&&(b.handler=a),this.each(function(){var a,d,e,h;return a=c(this),e=null!=(h=b.context)?h:c.fn[s].defaults.context,c.isWindow(e)||(e=a.closest(e)),e=c(e),d=k[e.data(j)],d||(d=new f(e)),new g(a,d,b)}),c[t]("refresh"),this},disable:function(){return n._invoke(this,"disable")},enable:function(){return n._invoke(this,"enable")},destroy:function(){return n._invoke(this,"destroy")},prev:function(a,b){return n._traverse.call(this,a,b,function(a,b,c){return b>0?a.push(c[b-1]):void 0})},next:function(a,b){return n._traverse.call(this,a,b,function(a,b,c){return b<c.length-1?a.push(c[b+1]):void 0})},_traverse:function(a,b,e){var f,g;return null==a&&(a="vertical"),null==b&&(b=d),g=m.aggregate(b),f=[],this.each(function(){var b;return b=c.inArray(this,g[a]),e(f,b,g[a])}),this.pushStack(f)},_invoke:function(a,b){return a.each(function(){var a;return a=g.getWaypointsByElement(this),c.each(a,function(a,c){return c[b](),!0})}),this}},c.fn[s]=function(){var a,d;return d=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],n[d]?n[d].apply(this,a):c.isFunction(d)?n.init.apply(this,arguments):c.isPlainObject(d)?n.init.apply(this,[null,d]):c.error(d?"The "+d+" method does not exist in jQuery Waypoints.":"jQuery Waypoints needs a callback function or handler option.")},c.fn[s].defaults={context:d,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},m={refresh:function(){return c.each(k,function(a,b){return b.refresh()})},viewportHeight:function(){var a;return null!=(a=d.innerHeight)?a:e.height()},aggregate:function(a){var b,d,e;return b=h,a&&(b=null!=(e=k[c(a).data(j)])?e.waypoints:void 0),b?(d={horizontal:[],vertical:[]},c.each(d,function(a,e){return c.each(b[a],function(a,b){return e.push(b)}),e.sort(function(a,b){return a.offset-b.offset}),d[a]=c.map(e,function(a){return a.element}),d[a]=c.unique(d[a])}),d):[]},above:function(a){return null==a&&(a=d),m._filter(a,"vertical",function(a,b){return b.offset<=a.oldScroll.y})},below:function(a){return null==a&&(a=d),m._filter(a,"vertical",function(a,b){return b.offset>a.oldScroll.y})},left:function(a){return null==a&&(a=d),m._filter(a,"horizontal",function(a,b){return b.offset<=a.oldScroll.x})},right:function(a){return null==a&&(a=d),m._filter(a,"horizontal",function(a,b){return b.offset>a.oldScroll.x})},enable:function(){return m._invoke("enable")},disable:function(){return m._invoke("disable")},destroy:function(){return m._invoke("destroy")},extendFn:function(a,b){return n[a]=b},_invoke:function(a){var b;return b=c.extend({},h.vertical,h.horizontal),c.each(b,function(b,c){return c[a](),!0})},_filter:function(a,b,d){var e,f;return(e=k[c(a).data(j)])?(f=[],c.each(e.waypoints[b],function(a,b){return d(e,b)?f.push(b):void 0}),f.sort(function(a,b){return a.offset-b.offset}),c.map(f,function(a){return a.element})):[]}},c[t]=function(){var a,c;return c=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],m[c]?m[c].apply(null,a):m.aggregate.call(null,c)},c[t].settings={resizeThrottle:100,scrollThrottle:30},e.load(function(){return c[t]("refresh")})})}.call(this),function(){!function(a,b){return"function"==typeof define&&define.amd?define(["jquery","waypoints"],b):b(a.jQuery)}(this,function(a){var b,c;return b={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck"},c=function(a,b){return a.wrap(b.wrapper),a.parent()},a.waypoints("extendFn","sticky",function(d){var e,f,g;return f=a.extend({},a.fn.waypoint.defaults,b,d),e=c(this,f),g=f.handler,f.handler=function(b){var c,d;return c=a(this).children(":first"),d="down"===b||"right"===b,c.toggleClass(f.stuckClass,d),e.height(d?c.outerHeight():""),null!=g?g.call(this,b):void 0},e.waypoint(f),this.data("stuckClass",f.stuckClass)}),a.waypoints("extendFn","unsticky",function(){return this.parent().waypoint("destroy"),this.unwrap(),this.removeClass(this.data("stuckClass"))})})}.call(this),function(a){"use strict";a.fn.fitVids=function(b){var c={customSelector:null};if(!document.getElementById("fit-vids-style")){var d=document.createElement("div"),e=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0],f="&shy;<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>";
d.className="fit-vids-style",d.id="fit-vids-style",d.style.display="none",d.innerHTML=f,e.parentNode.insertBefore(d,e)}return b&&a.extend(c,b),this.each(function(){var b=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];c.customSelector&&b.push(c.customSelector);var d=a(this).find(b.join(","));d=d.not("object object"),d.each(function(){var b=a(this);if(!("embed"===this.tagName.toLowerCase()&&b.parent("object").length||b.parent(".fluid-width-video-wrapper").length)){var c="object"===this.tagName.toLowerCase()||b.attr("height")&&!isNaN(parseInt(b.attr("height"),10))?parseInt(b.attr("height"),10):b.height(),d=isNaN(parseInt(b.attr("width"),10))?b.width():parseInt(b.attr("width"),10),e=c/d;if(!b.attr("id")){var f="fitvid"+Math.floor(999999*Math.random());b.attr("id",f)}b.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),b.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),function(a){a.expander={version:"1.4.7",defaults:{slicePoint:100,preserveWords:!0,widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:!1,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:!0,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null,afterCollapse:null}},a.fn.expander=function(b){function c(a,b){var c="span",d=a.summary;return b?(c="div",p.test(d)&&!a.expandAfterSummary?d=d.replace(p,a.moreLabel+"$1"):d+=a.moreLabel,d='<div class="'+a.summaryClass+'">'+d+"</div>"):d+=a.moreLabel,[d," <",c+' class="'+a.detailClass+'"',">",a.details,"</"+c+">"].join("")}function d(a){var b='<span class="'+a.moreClass+'">'+a.expandPrefix;return b+='<a href="#">'+a.expandText+"</a></span>"}function e(b,c){return b.lastIndexOf("<")>b.lastIndexOf(">")&&(b=b.slice(0,b.lastIndexOf("<"))),c&&(b=b.replace(l,"")),a.trim(b)}function f(a,b){b.stop(!0,!0)[a.collapseEffect](a.collapseSpeed,function(){var c=b.prev("span."+a.moreClass).show();c.length||b.parent().children("div."+a.summaryClass).show().find("span."+a.moreClass).show(),a.afterCollapse&&a.afterCollapse.call(b)})}function g(b,c,d){b.collapseTimer&&(i=setTimeout(function(){f(b,c),a.isFunction(b.onCollapse)&&b.onCollapse.call(d,!1)},b.collapseTimer))}var h="init";"string"==typeof b&&(h=b,b={});var i,j=a.extend({},a.expander.defaults,b),k=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,l=j.wordEnd||/(&(?:[^;]+;)?|[a-zA-Z\u00C0-\u0100]+)$/,m=/<\/?(\w+)[^>]*>/g,n=/<(\w+)[^>]*>/g,o=/<\/(\w+)>/g,p=/(<\/[^>]+>)\s*$/,q=/^(<[^>]+>)+.?/,r={init:function(){this.each(function(){var b,h,l,p,r,s,t,u,v,w,x,y,z,A,B=[],C=[],D={},E=this,F=a(this),G=a([]),H=a.extend({},j,F.data("expander")||a.meta&&F.data()||{}),I=!!F.find("."+H.detailClass).length,J=!!F.find("*").filter(function(){var b=a(this).css("display");return/^block|table|list/.test(b)}).length,K=J?"div":"span",L=K+"."+H.detailClass,M=H.moreClass+"",N=H.lessClass+"",O=H.expandSpeed||0,P=a.trim(F.html()),Q=(a.trim(F.text()),P.slice(0,H.slicePoint));if(H.moreSelector="span."+M.split(" ").join("."),H.lessSelector="span."+N.split(" ").join("."),!a.data(this,"expanderInit")){for(a.data(this,"expanderInit",!0),a.data(this,"expander",H),a.each(["onSlice","beforeExpand","afterExpand","onCollapse","afterCollapse"],function(b,c){D[c]=a.isFunction(H[c])}),Q=e(Q),r=Q.replace(m,"").length;r<H.slicePoint;)p=P.charAt(Q.length),"<"===p&&(p=P.slice(Q.length).match(q)[0]),Q+=p,r++;for(Q=e(Q,H.preserveWords),s=Q.match(n)||[],t=Q.match(o)||[],l=[],a.each(s,function(a,b){k.test(b)||l.push(b)}),s=l,h=t.length,b=0;h>b;b++)t[b]=t[b].replace(o,"$1");if(a.each(s,function(b,c){var d=c.replace(n,"$1"),e=a.inArray(d,t);-1===e?(B.push(c),C.push("</"+d+">")):t.splice(e,1)}),C.reverse(),I)v=F.find(L).remove().html(),Q=F.html(),P=Q+v,u="";else{if(v=P.slice(Q.length),w=a.trim(v.replace(m,"")),""===w||w.split(/\s+/).length<H.widow)return;u=C.pop()||"",Q+=C.join(""),v=B.join("")+v}H.moreLabel=F.find(H.moreSelector).length?"":d(H),J&&(v=P),Q+=u,H.summary=Q,H.details=v,H.lastCloseTag=u,D.onSlice&&(l=H.onSlice.call(E,H),H=l&&l.details?l:H),x=c(H,J),F.html(x),z=F.find(L),A=F.find(H.moreSelector),"slideUp"===H.collapseEffect&&"slideDown"!==H.expandEffect||F.is(":hidden")?z.css({display:"none"}):z[H.collapseEffect](0),G=F.find("div."+H.summaryClass),y=function(a){a.preventDefault(),A.hide(),G.hide(),D.beforeExpand&&H.beforeExpand.call(E),z.stop(!1,!0)[H.expandEffect](O,function(){z.css({zoom:""}),D.afterExpand&&H.afterExpand.call(E),g(H,z,E)})},A.find("a").unbind("click.expander").bind("click.expander",y),H.userCollapse&&!F.find(H.lessSelector).length&&F.find(L).append('<span class="'+H.lessClass+'">'+H.userCollapsePrefix+'<a href="#">'+H.userCollapseText+"</a></span>"),F.find(H.lessSelector+" a").unbind("click.expander").bind("click.expander",function(b){b.preventDefault(),clearTimeout(i);var c=a(this).closest(L);f(H,c),D.onCollapse&&H.onCollapse.call(E,!0)})}})},destroy:function(){this.each(function(){var b,c,d=a(this);d.data("expanderInit")&&(b=a.extend({},d.data("expander")||{},j),c=d.find("."+b.detailClass).contents(),d.removeData("expanderInit"),d.removeData("expander"),d.find(b.moreSelector).remove(),d.find("."+b.summaryClass).remove(),d.find("."+b.detailClass).after(c).remove(),d.find(b.lessSelector).remove())})}};return r[h]&&r[h].call(this),this},a.fn.expander.defaults=a.expander.defaults}(jQuery),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("eventEmitter"),require("eventie")):a.imagesLoaded=b(a,a.EventEmitter,a.eventie)}(this,function(a,b,c){"use strict";function d(a,b){for(var c in b)a[c]=b[c];return a}function e(a){return"[object Array]"===m.call(a)}function f(a){var b=[];if(e(a))b=a;else if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++)b.push(a[c]);else b.push(a);return b}function g(a,b,c){if(!(this instanceof g))return new g(a,b);"string"==typeof a&&(a=document.querySelectorAll(a)),this.elements=f(a),this.options=d({},this.options),"function"==typeof b?c=b:d(this.options,b),c&&this.on("always",c),this.getImages(),j&&(this.jqDeferred=new j.Deferred);var e=this;setTimeout(function(){e.check()})}function h(a){this.img=a}function i(a){this.src=a,n[a]=this}var j=a.jQuery,k=a.console,l="undefined"!=typeof k,m=Object.prototype.toString;g.prototype=new b,g.prototype.options={},g.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;b>a;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);for(var d=c.querySelectorAll("img"),e=0,f=d.length;f>e;e++){var g=d[e];this.addImage(g)}}},g.prototype.addImage=function(a){var b=new h(a);this.images.push(b)},g.prototype.check=function(){function a(a,e){return b.options.debug&&l&&k.log("confirm",a,e),b.progress(a),c++,c===d&&b.complete(),!0}var b=this,c=0,d=this.images.length;if(this.hasAnyBroken=!1,!d)return void this.complete();for(var e=0;d>e;e++){var f=this.images[e];f.on("confirm",a),f.check()}},g.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a),b.jqDeferred&&b.jqDeferred.notify&&b.jqDeferred.notify(b,a)})},g.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,b),b.emit("always",b),b.jqDeferred){var c=b.hasAnyBroken?"reject":"resolve";b.jqDeferred[c](b)}})},j&&(j.fn.imagesLoaded=function(a,b){var c=new g(this,a,b);return c.jqDeferred.promise(j(this))}),h.prototype=new b,h.prototype.check=function(){var a=n[this.img.src]||new i(this.img.src);if(a.isConfirmed)return void this.confirm(a.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var b=this;a.on("confirm",function(a,c){return b.confirm(a.isLoaded,c),!0}),a.check()},h.prototype.confirm=function(a,b){this.isLoaded=a,this.emit("confirm",this,b)};var n={};return i.prototype=new b,i.prototype.check=function(){if(!this.isChecked){var a=new Image;c.bind(a,"load",this),c.bind(a,"error",this),a.src=this.src,this.isChecked=!0}},i.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},i.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},i.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},i.prototype.confirm=function(a,b){this.isConfirmed=!0,this.isLoaded=a,this.emit("confirm",this,b)},i.prototype.unbindProxyEvents=function(a){c.unbind(a.target,"load",this),c.unbind(a.target,"error",this)},g}),Garp="undefined"==typeof Garp?{}:Garp,BASE="undefined"==typeof BASE?"/":BASE,CDN_URL="undefined"==typeof CDN_URL?BASE:CDN_URL,"/"!==CDN_URL[CDN_URL.length-1]&&(CDN_URL+="/"),Garp.innerShiv=function(){var a,b;return function(c,d){a||(a=document.createElement("div"),b=document.createDocumentFragment());var e=a.cloneNode(!0);if(e.innerHTML=c.replace(/^\s\s*/,"").replace(/\s\s*$/,""),d===!1)return e.childNodes;for(var f=b.cloneNode(!0),g=e.childNodes.length;g--;)f.appendChild(e.firstChild);return f}}(),Garp.apply=function(a,b){for(var c in b)a[c]=b[c];return a},Garp.applyIf=function(a,b){for(var c in b)a[c]||(a[c]=b[c]);return a},Garp.format=function(a,b){var c=a;if("object"==typeof b)Garp.each(b,function(a,b){b=b.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&"),c=c.replace(new RegExp("\\${"+b+"\\}","g"),a)});else for(var d=1,e=arguments.length;e>d;d++)c=c.replace(new RegExp("\\${"+d+"\\}","g"),arguments[d]);return c},Garp.each=function(a,b,c){for(var d in a)a.hasOwnProperty(d)&&(c?b.call(c,a[d],d,a):b(a[d],d,a))},Garp.createDelegate=function(a,b){return function(){a.apply(b,arguments)}},Garp.parseQueryString=function(a,b){a=a||window.location.search,b&&(a=unescape(a));var c={};return a.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,b,d,e){c[b]=e}),c},Garp.Observable=function(a){return Garp.apply(this,a),this.on=function(a,b,c){c="undefined"==typeof c?this:c,this.on.events="undefined"==typeof this.on.events?{}:this.on.events,this.on.events[a]="undefined"==typeof this.on.events[a]?[]:this.on.events[a],this.on.events[a].push({eventName:a,handler:b,scope:c})},this.addListeners=function(a){Garp.each(a,function(a,b){var c,d;"function"==typeof a?c=a:(c=a.fn,d=a.scope||this),this.on(b,c,d)},this)},this.un=function(a,b,c){c="undefined"==typeof c?this:c,this.on.events[a].pop({eventName:a,handler:b,scope:c})},this.fireEvent=function(a,b){"undefined"==typeof this.on.events,Garp.each(this.on.events[a],function(a){"function"==typeof a.handler&&a.handler.call(a.scope,b||{})})},this.init=function(){return this.listeners&&this.addListeners(this.listeners),this},this.init()},Garp.Transition=function(a,b){this.append=function(){a.on("beforeload",function(){},this),a.on("afterload",function(){},this)},this.crossFade=function(){a.on("beforeload",function(){this.copy=this.elm.clone().addClass("crossfade"),this.shim=this.elm.clone().addClass("shim"),this.copy.insertAfter(this.elm),this.shim.insertAfter(this.elm);var a=this.elm.position();this.copy.css({top:a.top,left:a.left,width:this.elm.width(),height:this.elm.height(),position:"absolute"}),this.elm.hide()},this),a.on("afterload",function(){this.shim.remove(),this.elm.fadeIn(this.speed),this.copy.fadeOut(this.speed,function(){$(this).remove()})},this)},this.fade=function(){a.on("beforeload",function(){this.copy=this.elm.animate({opacity:0})},this),a.on("afterload",function(){this.elm.animate({opacity:1})},this)},this.slideUp=function(){a.on("beforeload",function(){this.elm.slideUp(this.speed)},this),a.on("afterload",function(){this.elm.slideDown(this.speed)},this)},this.slideLeft=function(){a.on("beforeload",function(a){this.elm.wrap('<div class="x-wrap" />'),this.elm.parent("div.x-wrap").css({position:"relative",overflow:"hidden"}),this.elm.css("position","relative").animate({left:900*a.direction},this.speed)},this),a.on("afterload",function(a){var b=this;this.elm.stop().css("left",900*(1-a.direction)).animate({left:0},this.speed,null,function(){b.elm.unwrap()})},this)},this.init=function(){this.elm=$("#"+a.id),this.speed="slow",this[b].call(this)},this.init()},Garp.Browsebox=function(a){Garp.apply(this,new Garp.Observable),this.cache=!0,this.PRELOAD_DELAY=850,this.BROWSEBOX_URL="g/browsebox/",this.append=!1,Garp.apply(this,a),this.timer=null,this.cacheArr=[],this.afterLoad=function(a,b){this.append?$(".bb-next",$("#"+this.id)).replaceWith(Garp.innerShiv(a)):$("#"+this.id).html(Garp.innerShiv(a)),this.hijackLinks(),this.fireEvent("afterload",b),this.preloadNext()},this.processData=function(a,b,c){function d(){f--,0>=f&&!b&&g.afterLoad(a,{direction:c})}var e=$("img",a),f=e.length,g=this;if(f>0){var h=[];$(e).each(function(a,c){h[a]=new Image,b||$(h[a]).bind("load",d).bind("error",d),h[a].src=$(c).attr("src")})}else b||this.afterLoad(a,{direction:c})},this.loadPage=function(a,b,c){var d=BASE+this.BROWSEBOX_URL;d+=this.id+"/"+a+"/"+(b?b:this.filters?this.filters:"")+(this.options?this.options:""),this.fireEvent("beforeload",{direction:c});var e=this;setTimeout(function(){e.cacheArr[d]?e.processData(e.cacheArr[d],!1,c):$.ajax({url:d,cache:e.cache,success:function(a){e.cacheArr[d]=a,e.processData(a,!1,c)}})},800)},this.preloadNext=function(){var a=$(".bb-next a","#"+this.id).attr("href");if(a){var b=Garp.parseQueryString(a,!0),c=b["bb["+this.id+"]"];if(a=BASE+this.BROWSEBOX_URL+this.id+"/"+c+"/"+(this.filters?this.filters:""),this.cacheArr[a])this.processData(this.cacheArr[a],!0);else{var d=this;this.timer=setTimeout(function(){$.ajax({url:a,cache:d.cache,success:function(b){d.cacheArr[a]=b,d.processData(b,!0)}})},this.PRELOAD_DELAY)}}},this.hijackLinks=function(){var a=this;$(".bb-next a, .bb-prev a","#"+this.id).unbind().bind("click",function(b){b.preventDefault(),a.timer&&(clearTimeout(a.timer),a.timer=!1),a.rememberState&&a.setHash($(this).attr("href"));var c=Garp.parseQueryString($(this).attr("href"),!0),d=c["bb["+a.id+"]"],e=$(this).parent(".bb-next").length?1:-1;return a.loadPage(d,null,e),!1})},this.setHash=function(a){a=a.substr(a.indexOf("?")+1,a.length),window.location.hash=a},this.getDejaVu=function(){var a=Garp.parseQueryString(window.location.hash.replace(/#/g,""),!0);if(a["bb["+this.id+"]"]){var b=a["bb["+this.id+"]"];this.loadPage(b,null,null)}},this.init=function(){this.transition=new Garp.Transition(this,this.transition),this.hijackLinks(),this.getDejaVu();var a=$("#"+this.id);if(this.spinner=$('<div class="spinner"></div>').insertAfter("#"+this.id).css({left:a.position()?a.position().left:0,top:a.position()?a.position().top:0,width:a.width(),height:a.height()}),this.spinner.css({display:"none"}),this.hideSpinner||(this.on("beforeload",function(){var a=$("#"+this.id);this.spinner.css({display:"block",left:a.position()?a.position().left:0,top:a.position()?a.position().top:0,width:a.width(),height:a.height()})},this),this.on("afterload",function(){this.spinner.css({display:"none"})},this)),this.autoRun){var b="undefined"!=typeof this.speed?this.speed:800;this.interval=setInterval(function(){$("#"+this.id+".bb-next a").click()},b)}},this.init()},Garp.inlineLabels={init:function(a){var b=this;a=a||"label.inline",$(a).each(function(){function a(){$(d).val()&&b.focus.call(d,c)}var c=$(this),d=$("#"+c.attr("for"));d.focus(function(){b.focus.call(d,c)}).blur(function(){b.blur.call(d,c)}),setTimeout(a,1e3),setTimeout(a,3e3)})},focus:function(a){a.addClass("hidden")},blur:function(a){$(this).val()||a.removeClass("hidden")}},Garp.inlineLabels.init(),Garp.Validator=function(){var a={required:function(a){a.val()||Garp.Validator.triggerError(a.attr("id"),__("%s is een verplicht veld."))},noBMP:function(a){if(a.val()){var b=a.val();b=b.substring(b.length-4,b.length),b=b.toUpperCase(),".BMP"===b&&Garp.Validator.triggerError(a.attr("id"),__("Geen geldig bestandsformaat."))}},email:function(a){var b=/([\w]+)(\.[\w]+)*@([\w\-]+\.){1,5}([A-Za-z]){2,4}$/;a.val()&&!b.test(a.val())&&Garp.Validator.triggerError(a.attr("id"),__("%s is geen geldig e-mailadres."))},repeatPassword:function(a){if(a.attr("rel")&&$("#"+a.attr("rel"))){var b=$("#"+a.attr("rel"));b.length&&b.val()!==a.val()&&Garp.Validator.triggerError(a.attr("id"),__("De wachtwoorden komen niet overeen."))}},requiredIf:function(a){if(a.attr("rel")&&$("#"+a.attr("rel"))){var b=$("#"+a.attr("rel")),c=!1;if(c="checkbox"==b.attr("type")?b.is(":checked"):b.val(),c&&!a.val()){var d="checkbox"===b.attr("type")?"aangevinkt":"ingevuld",e=__("Als ### is "+d+", is %s verplicht.");e=e.replace("###",$('label[for="'+b.attr("id")+'"]').text()),Garp.Validator.triggerError(a.attr("id"),e)}}}};return{validateForm:function(b){var c=$("#"+b+" input, #"+b+" select, #"+b+" textarea");$("#"+b).submit(function(d){Garp.Validator.errorMessages={},c.each(function(){var b=$(this);for(var c in a)b.hasClass(c)&&a[c](b)});var e=!0;for(var f in Garp.Validator.errorMessages){e=!1;break}if(e)return!0;var g="";for(var h in Garp.Validator.errorMessages)g+=Garp.Validator.errorMessages[h]+"<br>";return $("#"+b+" p.error").html(g),d.preventDefault(),!1})},pushRule:function(b,c){a[b]=c},triggerError:function(a,b){if($("#"+a).attr("data-err-msg"))Garp.Validator.errorMessages[a]=$("#"+a).attr("data-err-msg");else{var c=$("label[for="+a+"]");Garp.Validator.errorMessages[a]=b.replace("%s",c.text())}}}}(),Garp.equalizeHeight=function(a){var b=0;a.each(function(){b=Math.max(b,$(this).height())}),a.height(b)},Garp.getBy=function(a,b,c){var d=[];for(var e in a){var f=a[e];f[b]&&(!c||c&&f[b]==c)&&d.push(f)}return 1==d.length?d[0]:d},Garp.FlashMessage=function(a){return Garp.apply(this,{msg:"",parseCookie:!1,cookieName:"FlashMessenger",afterShow:function(){},afterClose:function(){},elm:null,createElm:function(){var a="flashMessage";return this.elm=$("#"+a).length?$("#"+a):$("body").append('<div id="'+a+'"></div>').find("#"+a),this.elm},autoHide:!0,hideDelay:6e3,hideAnimation:function(){this.elm?this.elm.fadeOut("slow",Garp.createDelegate(this.afterClose,this)):this.afterClose(this)}}),Garp.apply(this,a),Garp.apply(this,{show:function(){return this.elm.show(),this},hide:function(){return this.hideAnimation?this.hideAnimation():this.close(),this},close:function(){return this.elm&&this.elm.hide(),this.afterClose&&this.afterClose(this),this},cookieParser:function(){var a=$.parseJSON(unescape(Garp.getCookie(this.cookieName))),b="";if(a&&a.messages){for(var c in a.messages){var d=a.messages[c];d&&(b+="<p>"+d.replace(/\+/g," ")+"</p>")}var e=new Date;return e.setHours(e.getHours()-1),Garp.setCookie(this.cookieName,"",e,"undefined"!=typeof COOKIEDOMAIN?COOKIEDOMAIN:document.location.host),b}return""},init:function(){return this.parseCookie&&(this.msg+=this.cookieParser()),this.msg?(this.elm||this.createElm(),this.msg&&this.elm.html(this.msg),this.autoHide&&setTimeout(Garp.createDelegate(this.hide,this),this.hideDelay),this.elm.show(),this.afterShow(this),this):this}}),this.init()},Garp.buildGoogleMap=function(a,b){var c=new google.maps.Map(a,{mapTypeId:google.maps.MapTypeId[b.maptype.toUpperCase()],navigationControl:!0,navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL},mapTypeControlOptions:{mapTypeIds:[""]},scaleControl:!0,center:new google.maps.LatLng(parseFloat(b.center.lat),parseFloat(b.center.lng)),zoom:parseInt(b.zoom,10)});if(b.markers)for(var d in b.markers){var e=b.markers[d];new google.maps.Marker({map:c,title:e.title,position:new google.maps.LatLng(parseFloat(e.lat),parseFloat(e.lng))})}},$(function(){$(".g-googlemap").each(function(){$(this).parent("a").length&&$(this).unwrap();var a=Garp.parseQueryString($(this).attr("src")),b=a.center.split(",");Garp.apply(a,{width:$(this).attr("width"),height:$(this).attr("height"),center:{lat:b[0],lng:b[1]},markers:a.markers?a.markers.split("|"):!1});for(var c in a.markers){var d=a.markers[c].split(",");a.markers[c]={lat:d[0],lng:d[1],title:d[2]?d[2]:""}}$(this).wrap('<div class="g-googlemap-wrap"></div>');var e=$(this).parent(".g-googlemap-wrap").width(a.width).height(a.height);Garp.buildGoogleMap(e[0],a)})}),Garp.getCookie=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},Garp.setCookie=function(a,b,c){b=escape(b)+"; path=/",b+=c?"; expires="+c.toGMTString():"",document.cookie=a+"="+b},Garp.removeCookie=function(a){Garp.setCookie(a,"",new Date("1900"))},$(function(){var a=unescape(Garp.getCookie("Garp_Auth"));if(a=jQuery.parseJSON(a),a&&a.userData&&a.userData.role){var b=a.userData.role;if(b&&("admin"==b||"developer"==b)){var c=function(){var a=[];!function l(b){if(b.childNodes&&b.childNodes.length>0)for(var c in b.childNodes)l(b.childNodes[c]);else a.push(b)}($("body")[0]);var b={position:"absolute",zIndex:"999999",padding:"4px",width:"20px",height:"20px",margin:"-14px 0 0 -14px",lineHeight:0,opacity:.5,border:"2px #fff outset",background:"#ddd"},c=function(a){$(a).bind("mouseenter",function(){$(this).css({opacity:1,border:"2px #fff outset",background:"#ddd"})}).bind("mouseleave",function(){$(this).css({opacity:b.opacity,border:b.border,background:b.background})})};for(var d in a){var e=a[d],f="//garp-snippet//";if(8==e.nodeType&&e.nodeValue.indexOf(f)>-1){var g=e.nextSibling,h=BASE+"g/content/admin/?model=Snippet&id="+e.nodeValue.replace(f,""),i='<a href="'+h+'" title="edit" target="garp_cms"><img src="'+CDN_URL+'media/images/garp/icons/pencil.png"></a>',j=$(g),k=$(i).insertBefore(g).css(b);g.getBoundingClientRect&&k.css({top:j.position().top,left:j.position().left}),c(k)}}};setTimeout(c,1e3)}}}),Garp.isLoggedIn=function(){var a=Garp.getCookie("Garp_Auth");return a&&(a=$.parseJSON(unescape(a)),a.userData)?!0:!1},Garp.hasCookiesAccepted=function(){return"1"===Garp.getCookie("Garp_Accept_Cookies")},Garp.acceptCookies=function(){var a=new Date;a.setYear(a.getFullYear()+1),Garp.setCookie("Garp_Accept_Cookies","1",a)},Garp.relativeDate=function(a,b,c){"function"!=typeof a.getTime&&(a=new Date(a+"")),"function"!=typeof b.getTime&&(b=new Date(b+""));var d=Math.abs(a.getTime()-b.getTime());if(isNaN(d))return"";d/=6e4;var e,f="",g=1,h=60*g,i=24*h,j=7*i,k=30*i,l=365*i,m={year:l,month:k,week:j,day:i,hour:h,minute:g};if(c=m[c||"year"],d>=l&&c>=l){var n=Math.round(d/l);f=n+" "+__(1==n?"year":"years")}else if(d>=k&&c>=k){var o=Math.round(d/k);f=o+" "+__(1==o?"month":"months")}else if(d>=j&&c>=j){var p=Math.ceil(d/j);p>2?f=p+" "+__(1==p?"week":"weeks"):(e=Math.round(d/i),f=e+" "+__(1==e?"day":"days"))}else if(d>=i&&c>=i)e=Math.round(d/i),f=e+" "+__(1==e?"day":"days");else if(d>=h&&c>=h){var q=Math.round(d/h);f=q+" "+__(1==q?"hour":"hours")}else if(d>=g){var r=Math.round(d);f=r+" "+__(1==r?"minute":"minutes")}else f=__("less than a minute");return f},Garp.Twitter=function(){return console&&console.warn,!1},Garp.constrain=function(a){var b=arguments[2],c=arguments[1];return"Number"!=typeof b&&(c=0,b=arguments[1]),c>a&&(a=b),a>b&&(a=c),a},Garp.playerBox=function(a){$player=a.$player,$navigation=a.$navigation;var b=a.activeClass||"",c=a.width||480,d=a.height||320,e=a.navActiveClass||"";$navigation.bind("click",function(a){if(a&&a.target){a.preventDefault();var f=$(a.target);if(f.is("img")||f.is("span")){var g=f.parent("a"),h=g.attr("href"),i=!1;$("img, iframe",$player).removeClass(b),$("a",$navigation).removeClass(e),g.addClass(e),g.hasClass("video")&&(i=!0);var j=function(){$player.html(i?'<iframe src="'+h+'" width="'+c+'" height="'+d+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':'<img src="'+h+'">'),setTimeout(function(){$("img, iframe",$player).addClass(b)},20)};if(i)setTimeout(j,1e3);else{var k=new Image;k.onload=j,k.src=h}}}})},Garp.CountDownArea=function(a,b,c,d,e){function f(){var a=c-h.val().length;h.hasClass("placeholder")&&(a=c),$(b).html(a+""),"function"==typeof e&&e(a)}function g(){"undefined"!=typeof h.val()&&(this.buffer&&clearTimeout(this.buffer),this.buffer=setTimeout(function(){var a=h.val().length;a>=c?(i.attr({disabled:"disabled"}),a>0&&$(b).addClass("surplus")):(i.removeAttr("disabled"),$(b).removeClass("surplus")),d||0!==a||i.attr({disabled:"disabled"}),f()},50))}var h=$(a),i=$('input[type="submit"], button',$(a).parent("form"));c||(c=140),d=d||!1,h.keyup(g).keypress(g).blur(g).click(g),g()},Garp.scrollHandler=function(){function a(a){var b=a.offset().top-200;0>b&&(b=0);var c=$(window).scrollTop(),d=$(window).height()+c;return b>=c&&d>=b}function b(){d.length?$.each(d,function(b,c){if(c){var e=c[0],f=c[1];a(e)&&(d.splice(b,1),f())}}):$(window).unbind("scroll",b)}var c=!1,d=[];return{elms:d,register:function(e,f){return a(e)?void f():(d.push([e,f]),void(c||($(window).bind("scroll",b),setInterval(b,2e3),c=!0)))}}}(),Garp.lazyLoader={reg:function(a){if(!a.id||Garp.lazyLoader[a.id])throw"Can't register lazyLoader. No id property or duplicate entry.";if("function"!=typeof a.before&&"function"!=typeof a.after)throw"No callback function defined in lazyLoader config.";Garp.lazyLoader[a.id]=a},unreg:function(a){delete Garp.lazyLoader[a]},init:function(){function a(b){b&&b.preventDefault&&b.preventDefault();var c=$(this).attr("data-con");"undefined"==typeof c&&(c="?");var d=$(this).attr("id"),e=$(this).attr("data-attr")||"";e||(c="");var f=$.noop,g=$.noop;Garp.lazyLoader[d]&&(Garp.lazyLoader[d].before&&(f=Garp.lazyLoader[d].before),Garp.lazyLoader[d].after&&(g=Garp.lazyLoader[d].after));var h=Garp.createDelegate(a,this);f(this,h);var i=$(this).attr("data-href")+c+e,j=this,k=$(this).hasClass("json"),l=!1;$(this).attr("data-replace-selector")&&$($(this).attr("data-replace-selector")).length&&(l=!0),$.get(i,function(a){k&&(a=a.html),l?$($(j).attr("data-replace-selector")).replaceWith(a):$(j).html(a),g.call(j,j,a,h)},k?"json":"html")}var b=$(".lazy-load");b.length&&b.each(function(b,c){Garp.scrollHandler.register($(c),function(){a.call(c)})})}},function(a){function b(){k.setAttribute("content",n),o=!0}function c(){k.setAttribute("content",m),o=!1}function d(d){j=d.accelerationIncludingGravity,g=Math.abs(j.x),h=Math.abs(j.y),i=Math.abs(j.z),a.orientation&&180!==a.orientation||!(g>7||(i>6&&8>h||8>i&&h>6)&&g>5)?o||b():o&&c()}var e=navigator.userAgent;if(/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(e)&&e.indexOf("AppleWebKit")>-1){var f=a.document;if(f.querySelector){var g,h,i,j,k=f.querySelector("meta[name=viewport]"),l=k&&k.getAttribute("content"),m=l+",maximum-scale=1",n=l+",maximum-scale=10",o=!0;k&&(a.addEventListener("orientationchange",b,!1),a.addEventListener("devicemotion",d,!1))}}}(this),Garp.asyncLoad=function(a,b,c,d){if("js"===b){var e=document.createElement("script");e.addEventListener&&e.addEventListener("load",function(){c.call(d)},!1),$("head")[0].appendChild(Garp.applyIf(e,{onreadystatechange:function(){("loaded"==this.readyState||"complete"==this.readyState)&&c.call(d)},type:"text/javascript",src:a}))}else if("css"!==b)throw"Unsupported type for asyncLoad"},Garp.FormHelper=Garp.FormHelper||{},Garp.apply(Garp.FormHelper,{form:$(".garp-form"),ajaxBusyCls:"loading",onAjaxComplete:function(a,b){var c=!1,d=!1;"success"===b&&(d=$.parseJSON(a.responseText),d&&d.html&&(this.form.html(d.html),c=!0)),console&&console.log&&!c},onBeforeAjax:function(){return!0},ajaxTimeout:3e4,ajaxDataType:"json",hijackUploadFields:function(a,b){var c=$(".hijack-upload",this.form);if(c.length){var d=function(){c.each(function(){var c=$(this),d=c,e=c.attr("name")||c.data("name");c.attr("name",e+"-filefield");var f=c.data("prepopulate-filelist"),g=c.data("type")||"image",h=BASE+"g/content/upload/insert/1/mode/raw/type/"+g,i=BASE+"g/content/upload/insert/1/type/"+g;if(c=c.parent(),c[0]){var j=!1,k=d.data("max-files")||null;d.data("max-files")&&d.data("max-files")>1&&(j=!0);var l={element:c[0],action:h,actionNonRawMode:i,debug:!1,allowedExtensions:d.attr("data-allowed-extensions")?d.attr("data-allowed-extensions").split(","):null,sizeLimit:d.attr("data-max-file-size")?1024*parseInt(d.attr("data-max-file-size"),10)*1024:null,showMessage:function(a){new Garp.FlashMessage({msg:a,parseCookie:!1})},template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>Sleep files hier om up te loaden</span></div><div class="qq-upload-button-container"><div class="qq-upload-button">uploaden</div></div><ul class="qq-upload-list"></ul></div>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><span class="qq-upload-failed-text">Mislukt</span><a class="qq-upload-cancel" href="#">Cancel</a><a class="remove">Verwijder</a></li>',multiple:j,maxItems:k,onSubmit:function(a,b){this.beforeUpload&&this.beforeUpload(c,b),this.params={filename:b},c.parent("div").addClass("uploading")},onComplete:function(a,b,d){function f(){var a=$(g).data("max-items"),b=$("ul.qq-upload-list li",g).length;a&&a==b?$(".qq-upload-button-container",g).hide():$(".qq-upload-button-container",g).show()}var g=this.element;$(g).parent().removeClass("uploading").addClass("done-uploading"),f();var h=b;d&&d.id?(a=d.id,b=d.filename,$("a.remove",g).unbind().bind("click",function(){var a=$(this).parent("li").find("span.qq-upload-file").text();$('input[data-filename="'+a+'"]',g).remove(),$(this).parent("li").remove(),f()}),$(g).append('<input type="hidden" value="'+a+'" name="'+e+'[]" data-filename="'+b+'">'),this.afterUpload&&this.afterUpload(d,c,h)):($("a.remove:last",g).click(),Garp.FlashMessage({msg:__("Something went wrong while uploading. Please try again later")}))}},m=Garp.apply(l,b.uploaderConfig),n=new qq.FileUploader(m);if($(n._element).data("max-items",k),a&&"function"==typeof a&&a(c),b.uploaderConfig.afterInit&&b.uploaderConfig.afterInit(b,c),f)for(var o=0;o<f.length;o++){var p=f[o].id,q=f[o].filename,r={};r={id:p,filename:q,fake:!0},n._addToList(p,q),m.onComplete.call({element:c[0]},r,r,r)}b.uploaderConfig.initComplete&&b.uploaderConfig.initComplete(b,c)}})};Garp.asyncLoad(BASE+"js/fileuploader.js","js",d,this)}},ajaxify:function(){var a=this,b=$(this.form);return b.bind("submit",function(c){return a.validator&&a.validator.validateForm()&&(c.preventDefault(),a.onBeforeAjax.call(a))?(b.addClass(a.ajaxBusyCls),$.ajax(b.attr("action"),{data:b.serializeArray(),type:b.attr("method"),dataType:a.ajaxDataType,timeOut:a.ajaxTimeout,complete:function(c,d){b.removeClass(a.ajaxBusyCls),a.onAjaxComplete.call(a,c,d)}}),!1):void 0}),this},setupDuplicators:function(){this._duplicators=[];var a=this;$(".duplicatable",this.form).each(function(){a._duplicators.push(new Garp.FormHelper.Duplicator(this,a))})},setupValidation:function(){var a=function(){this.disable()};this.validator=new Garp.FormHelper.Validator({form:this.form,listeners:{formvalid:function(b){$('button[type="submit"]',b.form).bind("click.validator",a)},forminvalid:function(b){$('button[type="submit"]',b.form).unbind("click.validator",a)},fieldvalid:function(a){a.closest("div").removeClass("invalid").addClass("valid")},fieldinvalid:function(a){a.closest("div").addClass("invalid").removeClass("valid")}}}).bind()},fixPlaceholdersIfNeeded:function(){var a=document.createElement("input");"undefined"==typeof a.placeholder&&Garp.asyncLoad(BASE+"js/libs/jquery.addPlaceholder.js","js",function(){$("input[placeholder], textarea[placeholder]",this.form).length&&$("input[placeholder], textarea[placeholder]",this.form).addPlaceholder&&$("input[placeholder], textarea[placeholder]",this.form).addPlaceholder()},this)},formatName:function(a){return a&&(a=a.replace("[","\\[").replace("]","\\]")),a},init:function(a){return Garp.apply(this,{uploaderConfig:{}}),Garp.apply(this,a),this.setupDuplicators(this),this.hijackUploadFields(null,this),this.setupValidation(this),this.form.hasClass("ajax")&&this.ajaxify(),this.fixPlaceholdersIfNeeded(),this
}}),Garp.FormHelper.Duplicator=function(a,b,c){return Garp.apply(this,{addText:__("Add"),removeText:__("Remove"),buttonClass:"",buttonAddClass:"",buttonRemoveClass:"",afterDuplicate:null,wrap:$(a).closest("div"),field:$(a),fh:b,numOfFields:1,maxItems:$(a).data("max-items")||!1,newId:($(a).attr("id")||"garpfield-"+(new Date).getTime())+"-",skipElements:"",updateUI:function(){this.maxItems&&(this.numOfFields>=this.maxItems?this.addButton.hide():this.addButton.show())},duplicateField:function(a){function b(a){return"]"==a[a.length-1]?a.replace(/\[*\d\]/,"["+parseInt(h,10)+"]"):a}function c(a){var b=g.buttonRemoveClass||g.buttonClass,c=$('<input class="remove '+b+'" type="button" value="'+g.removeText+'">');c.appendTo(a),c.bind("click",function(){a.is("fieldset")?a.remove():(a.closest("div").prev("div").find(".duplicatable").focus(),a.closest("div").remove()),g.numOfFields--,g.updateUI(),g.fh.validator&&g.fh.validator.init()})}if("file"!=this.field.attr("type")){var d,e=this.newId+this.numOfFields,f="undefined"==typeof a;a=a||this.field.clone(),a.addClass("duplicate");var g=this,h=this.numOfFields;if(this.field.is("fieldset")?this.field.attr("id",e):a.find("[id]").attr("id",e),this.field.hasClass("file-input-wrapper"))a=$('<input type="file" />'),a.insertAfter(this.field.parent("div")),a.addClass("hijack-upload duplicatable"),a.wrap("<div></div>"),d=a,this.fh.hijackUploadFields(c,this.fh);else{if(a.find("[for]").attr("for",e),f&&a.find(".errors").remove(),a.attr("name")&&a.attr("name",b(a.attr("name"))),a.find("[name]").each(function(){$(this).attr("name",b($(this).attr("name")))}),f){a.find("input").not('[type="radio"], [type="checkbox"], [type="hidden"]').val("");var i=this.skipElements.split(",");a.find("[name]").each(function(){for(var a=$(this),b=a.attr("name"),c=0;c<i.length;c++)if(b==i[c]||new RegExp("\\["+i[c]+"\\]$").test(b)){a.remove();break}})}a.find(".invalid").removeClass("invalid"),d=a.find(".duplicatable").val(""),c(a),a.insertBefore(this.addButton),this.fh.validator&&this.fh.validator.init()}if(this.numOfFields++,this.updateUI(),this.afterDuplicate){for(var j,k=this.afterDuplicate.split("."),l=0,m=window,n=window;l<k.length;l++){if(j=k[l],n=m,"undefined"==typeof m[j])throw new Error("Could not resolve callback path "+this.afterDuplicate);m=m[j]}if("function"!=typeof m)throw new Error('Given callback "'+this.afterDuplicate+'" is not a function.');m.call(n,a)}f&&d.focus()}},createAddButton:function(){var a=this,b=this.buttonAddClass||this.buttonClass;return this.field.after('<input class="add '+b+'" type="button" value="'+this.addText+'">'),this.addButton=this.field.next(".add"),this.addButton.bind("click",function(b){return a.duplicateField(),b.preventDefault(),!1}),this},init:function(){if("initialized"!=this.field.attr("data-duplicator")){this.field.attr("data-duplicator","initialized"),this.field.attr("data-button-class")&&(this.buttonClass=this.field.attr("data-button-class")),this.field.attr("data-button-add-class")&&(this.buttonAddClass=this.field.attr("data-button-add-class")),this.field.attr("data-button-add-text")&&(this.addText=this.field.attr("data-button-add-text")),this.field.attr("data-button-remove-class")&&(this.buttonRemoveClass=this.field.attr("data-button-remove-class")),this.field.attr("data-button-remove-text")&&(this.removeText=this.field.attr("data-button-remove-text")),this.field.attr("data-skip-elements")&&(this.skipElements=this.field.attr("data-skip-elements")),this.field.attr("data-after-duplicate")&&(this.afterDuplicate=this.field.attr("data-after-duplicate")),this.createAddButton();var a=this.field.attr("name"),b=this;if(a)"]"!==a[a.length-1]&&this.field.attr("name",a+"["+this.numOfFields+"]");else{$("[name]",this.field).each(function(){var a=$(this).attr("name");"]"!==a[a.length-1]&&$(this).attr("name",a+"["+b.numOfFields+"]")});var c=this.field.attr("class").split(" ")[0];this.wrap=this.field.wrap('<div class="fieldset-wrap"></div>').parent(),this.addButton.detach().appendTo(this.wrap);for(var d=this.wrap.next("."+c);d.length;)this.duplicateField(d),d=this.wrap.next("."+c)}return this}}}),Garp.apply(this,c),this.init()},Garp.FormHelper.Validator=function(a){return Garp.apply(this,{form:$(".garp-form"),elms:["input","select","textarea"],msgTarget:"below",missingNameText:__("This field"),interactive:!0}),Garp.apply(this,a),Garp.apply(this,new Garp.Observable(this)),Garp.apply(this,{hasErrors:!1,rules:{required:{init:function(a){a.parents(".multi-input.required").length&&a.attr("required","required")},fn:function(a){if(!a.attr("required"))return!0;switch(a.attr("type")){case"checkbox":case"radio":var b=!1,c=$(this.elements).filter($('input[name="'+a.attr("name")+'"]'));return c.each(function(){$(this).attr("checked")&&(b=!0)}),b;default:return""!==$(a).val()&&!$(a).hasClass("placeholder")}},errorMsg:__("This field is required")},email:{fn:function(a){return a.attr("required")&&"email"==a.attr("type")?/^(\w+)([\-+.\'][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/.test(a.val()):!0},errorMsg:__("'${1}' is not a valid email address in the basic format local-part@hostname")},number:{fn:function(a){if("number"===a.attr("type")){var b=a.val();if(!b&&!a.attr("required"))return!0;b=b.replace(/,/,"."),a.val(b);var c,d;if(!$.isNumeric(b))return!1;if(b=parseInt(b,10),c=parseInt(a.attr("min"),10),d=parseInt(a.attr("max"),10),a.attr("min")&&c>b||a.attr("max")&&b>d)return!1}return!0},errorMsg:__("'${1}' is not a valid number for this field")},pattern:{RegExCache:{},fn:function(a){if(!a.attr("pattern")||!a.val().length)return!0;var b=a.attr("pattern"),c=this.rules.pattern.RegExCache;return c[b]||(c[b]=new RegExp("^"+a.attr("pattern")+"$")),c[b].test(a.val())},errorMsg:__("'${1}' does not match against pattern '${2}'")},url:{mailtoOrUrlRe:/(^mailto:(\w+)([\-+.][\w]+)*@(\w[\-\w]*))|((((^https?)|(^ftp)):\/\/)?([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,stricter:/(^mailto:(\w+)([\-+.][\w]+)*@(\w[\-\w]*))|(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,init:function(a){if(a.attr("type")&&"url"===a.attr("type")){var b=this.rules.url.stricter;$(a).bind("blur.urlValidator",function(){""===$(this).val()||b.test($(this).val())||"http://"!==$.trim($(this).val()).substr(0,7)&&$(this).val("http://"+$.trim($(this).val()))}).attr("data-force-validation-on-blur",a.attr("name"))}},fn:function(a){return"url"==a.attr("type")&&a.val().length?this.rules.url.mailtoOrUrlRe.test(a.val()):!0},errorMsg:__("'${1}' is not a valid URL")},dutchPostalCode:{init:function(a){a.hasClass("dutch-postal-code")&&$(a).attr("maxlength",8).bind("blur.duthPostalcodeValidator",function(){var a=/(\d{4})(.*)(\w{2})/.exec($(this).val());a&&$(this).val(a[1]+" "+a[3].toUpperCase())})},fn:function(a){return a.hasClass("dutch-postal-code")&&a.val().length?/^\d{4} \w{2}$/.test(a.val()):!0},errorMsg:__("'${1}' is not a valid Dutch postcode")},identicalTo:{init:function(a){if(a.attr("data-identical-to")){var b=Garp.FormHelper.formatName(a.attr("data-identical-to"));a.attr("data-force-validation-on-blur",b);var c=this;$('[name="'+b+'"]').on("blur",function(){c.validateField(a,c.rules.identicalTo)})}},fn:function(a){if(!a.attr("data-identical-to")||!a.val().length)return!0;var b=Garp.FormHelper.formatName(a.attr("data-identical-to")),c=$('[name="'+b+'"]'),d=c.val();return a.val()===d},errorMsg:__("Value doesn't match")}},initRules:function(){var a=this.elements.toArray();Garp.each(this.rules,function(b){b.init&&Garp.each(a,function(a){b.init.call(this,$(a))},this)},this)},setRuleIds:function(){var a=0;Garp.each(this.rules,function(b){b.id=a+=1})},getMsgTarget:function(a){var b;return b="below"===this.msgTarget?$("ul.errors",$(a).closest("div")).length?$("ul.errors",$(a).closest("div")):$('<ul class="errors"></ul>').appendTo($(a).closest("div")):msgTarget},getUniqueField:function(a,b){var c=$(a);return c.closest("div").find(".multi-input").length?Garp.FormHelper.formatName(c.attr("name"))+b.id:c.attr("id")+b.id},setError:function(a,b){var c=this.getMsgTarget(a),d=this.getUniqueField(a,b);if(!$('li[data-error-id="'+d+'"]').length){var e=$(a),f=e.attr("name")?Garp.FormHelper.formatName(e.attr("name")):this.missingNameText,g=Garp.format(b.errorMsg,e.val()||"",f);c.first().append('<li data-error-id="'+d+'">'+g.replace(/\[\]/,"")+"</li>")}},clearError:function(a,b){$('li[data-error-id="'+this.getUniqueField(a,b)+'"]',this.form).remove()},_blurredElement:null,bindInteractiveHandlers:function(){var a=this;this.elements.off("focus.validator blur.validator").on("focus.validator",function(){a._blurredElement&&a.validateField(a._blurredElement)}).on("blur.validator",function(){a._blurredElement=this,$(this).attr("data-force-validation-on-blur")&&a.validateField($(this).attr("data-force-validation-on-blur"))})},addRule:function(a){return Garp.apply(this.rules,a),this.setRuleIds(),this},setRuleErrorMsg:function(a,b){return this.rules[a]&&b&&(this.rules[a].errorMsg=b),this},validateField:function(a,b){a=$(a);var c=!0;return b&&b.fn?b.fn.call(this,a)?this.clearError(a,b):(this.setError(a,b),this.hasErrors=!0,c=!1):Garp.each(this.rules,function(b){b.fn.call(this,a)?this.clearError(a,b):(this.setError(a,b),this.hasErrors=!0,c=!1)},this),this.fireEvent(c?"fieldvalid":"fieldinvalid",a),c},clearErrors:function(){return $("ul.errors",this.form).remove(),this.hasErrors=!1,this},validateForm:function(){return this.hasErrors=!1,Garp.each(this.elements.toArray(),this.validateField,this),this.fireEvent(this.hasErrors?"forminvalid":"formvalid",this),!this.hasErrors},cleanupPlaceholders:function(){Garp.each(this.elements.toArray(),function(a){a=$(a),a.attr("placeholder")&&a.attr("placeholder")==a.val()&&a.val("")})},resetPlaceholders:function(){Garp.each(this.elements.toArray(),function(a){$(a).addPlaceholder()})},bind:function(a,b){a||(a=this.form);var c=this;return a.on((b||"submit")+".validator",function(a){return c.cleanupPlaceholders(),c.validateForm()?!0:($().addPlaceholder&&c.resetPlaceholders(),a.preventDefault(),!1)}),c},init:function(){return this.form.attr("novalidate","novalidate"),this.elements=$(this.elms.join(", "),this.form),this.initRules(),this.setRuleIds(),this.interactive&&this.bindInteractiveHandlers(),this}}),this.init()},function(){$(".social-defer").on("mouseenter mouseleave click",function(){if($(this).hasClass("social-defer")&&$(this).get(0).nextSibling){var a=$(this).get(0).nextSibling.textContent||$(this).get(0).nextSibling.nodeValue;a=a.split("//garp-defer//"),a&&a[1]&&$(this).removeClass("social-defer").addClass("active").html($(a[1])),$(this).hasClass("fb")&&window.fbAsyncInit(),$(this).hasClass("twitter")&&Garp.asyncLoad("http://platform.twitter.com/widgets.js","js",function(){})}})}(),Garp.locale="undefined"==typeof Garp.locale?{}:Garp.locale,Garp.apply(Garp.locale,{years:"jaren",year:"jaar",months:"maanden",month:"maand",weeks:"weken",week:"week",days:"dagen",day:"dag",hours:"uur",hour:"uur",minutes:"minuten",minute:"minuut",ago:"geleden","less than a minute":"minder dan een minuut",Add:"Toevoegen",Remove:"Verwijderen","'${1}' is not valid":"'${1}' is niet geldig","This field is required":"Dit veld is verplicht","'${1}' does not appear to be a postal code":"'${1}' is geen geldige postcode","'${1}' does not match against pattern '${2}'":"Het ingevulde '${1}' komt niet overeen met het patroon voor veld '${2}","'${1}' is not a valid email address in the basic format local-part@hostname":"'${1}' is geen geldig e-mailadres in het formaat account@voorbeeld.nl","'${1}' is not a valid Dutch postcode":"'${1}' is geen geldige Nederlandse postcode","'${1}' is not a valid URL":"'${1}' is geen geldige URL","'${1}' is not a valid number for this field":"'${1}' is geen geldig nummer","Value doesn't match":"Waarde komt niet overeen","{file} has invalid extension. Only {extensions} are allowed.":"{file} heeft niet de juiste extensie. De volgende extensie(s) zijn toegestaan: {extensions}","{file} is too large, maximum file size is {sizeLimit}.":"{file} is te groot. Maximum grootte is {sizeLimit}","{file} is too small, minimum file size is {minSizeLimit}.":"{file} is te klein. Minimale grootte is {minSizeLimit}","{file} is empty, please select files again without it.":"{file} is leeg.","The files are being uploaded, if you leave now the upload will be cancelled.":"Bestanden worden geüpload. Het uploaden wordt onderbroken als u weggaat.","Something went wrong while uploading. Please try again later":"Er ging iets mis met uploaden. Probeer 't later opnieuw"});var APP=APP||{};APP.controller={init:function(){FastClick.attach(document.body),APP.requestAnimationFrame(),APP.smoothScroll(),APP.logoFlipper.init(),APP.slider(),APP.article.init(),APP.packery.init(),APP.caseFilters.init(),APP.ideaForm.init(),APP.comments.init()}},APP.helpers={chrome32:function(){return"webkitRequestAnimationFrame"in window&&-1!=navigator.appVersion.indexOf("32.")?!0:void 0},stockAndroid:function(){return $("body").hasClass("is-stock-android")?!0:void 0},indexToCategory:function(a){switch(a=parseInt(a,10)){case 5:return"networks";case 6:return"crowds";case 7:return"data";case 8:return"visual";case 9:return"point of view";case 10:return"immersion";case 11:return"robots";case 12:return"publishing";default:return"none"}},cateogryToIndex:function(a){switch(a){case"networks":return 5;case"crowds":return 6;case"data":return 7;case"visual":return 8;case"point of view":return 9;case"point":return 9;case"immersion":return 10;case"robots":return 11;case"publishing":return 12;default:return null}}},APP.ideaForm={$form:$(".js-idea-form"),$submit:$(".js-form-submit"),init:function(){return this.$form.length?(Garp.FormHelper.init({form:$(".js-idea-form")}),void this.submitListener()):!1},formValidator:function(){return this.$form.children().hasClass("invalid")?!1:!0},submitListener:function(){var a=this;this.$form.submit(function(){a.formValidator()&&a.showLoader()})},showLoader:function(){$(".submit-error").remove(),this.$submit.addClass("is-submitting").after('<span class="form-loading-indicator"><i></i><i></i><i></i><i></i></span>')},hideLoader:function(){$(".form-loading-indicator").remove(),this.$submit.removeClass("is-submitting")}},APP.logoFlipper={interval:1e3,interval2:500,transition:200,offset:2,$top:$(".js-logoflipper-top"),$bottom:$(".js-logoflipper-bottom"),init:function(){return this.$top.length?void this.flipFront():!1},randomNumber:function(a,b){return Math.floor(Math.random()*a)*b},flipFront:function(){{var a=this;this.randomNumber(10,-150),this.randomNumber(10,-150)}this.$top.removeClass("is-flipped"),this.$bottom.removeClass("is-flipped"),window.setTimeout(function(){a.flipBack()},a.interval)},flipBack:function(){var a=this,b=this.randomNumber(10,-150),c=this.randomNumber(10,-150);this.$top.addClass("is-flipped"),this.$bottom.addClass("is-flipped"),window.setTimeout(function(){$(".js-logoflipper-bg",a.$top).css("background-position","0 "+(b-a.offset)+"px"),$(".js-logoflipper-bg",a.$bottom).css("background-position","-300px "+c+"px")},a.transition),window.setTimeout(function(){a.flipFront()},this.interval2)}},APP.caseFilters={$body:$("body"),$cases:$(".js-packery-item"),$caseFilters:$(".js-case-filters"),init:function(){var a=this;if(!this.$caseFilters.length)return!1;if(this.clickListener(),this.$caseFilters&&location.hash){var b=!1,c=document.URL.substr(document.URL.indexOf("#")+1);if("point%20of%20view"==c&&(c="point of view"),isNaN(c)||(c=APP.helpers.indexToCategory(c)),this.$cases.each(function(){$(this).attr("data-category")===c&&(b=!0)}),b===!1)return;var d='.js-filter-list li[data-show="'+c+'"]';a.filterCases("category",c,$(d))}},clickListener:function(){var a=this;this.$body.on("click",".js-filter-tabs li",function(){var b=$(this).attr("data-show-filter-type"),c='.js-filter-list[data-filter-type="'+b+'"]';$(".is-current-filter-type").removeClass("is-current-filter-type"),$(this).addClass("is-current-filter-type"),$(".js-filter-list").hide(),$(c).show(),a.filterCases(c,"all",$("[data-show=all]",c))}),this.$body.on("click",".js-filter-list li",function(){var b=$(this).parent().attr("data-filter-type"),c=$(this).attr("data-show");a.filterCases(b,c,$(this))})},filterCases:function(a,b,c){var d=this;c&&($(".is-current-filter-item").removeClass("is-current-filter-item"),c.addClass("is-current-filter-item")),"all"==b?d.$cases.show():this.$cases.each("tag"==a?function(){var a=($(this),$(this).attr("data-tags"));if(a){var c=d.tagSplitter(a,b);c?$(this).show():$(this).hide()}else $(this).hide()}:function(){$(this).attr("data-"+a)!=b?$(this).hide():$(this).show()}),APP.packery.layout()},tagSplitter:function(a,b){var c=!1,d=a.split(",");return $.each(d,function(a,d){d==b&&(c=!0)}),c}},APP.packery={$packery:$(".packery"),init:function(){return this.$packery.length?(this.initPackery(),this.resizeListener(),void this.$packery.each(function(){var a=$(this);imagesLoaded($(this),function(){APP.packery.layout(a)})})):!1},resizeListener:function(){var a;$(window).resize(function(){clearTimeout(a),a=setTimeout(APP.packery.initPackery,300)})},initPackery:function(){APP.responsive.matchesBreakpoint("small")&&!APP.responsive.matchesBreakpoint("medium")?APP.packery.setPackery(250):APP.responsive.matchesBreakpoint("medium")?APP.packery.setPackery(311):APP.packery.unsetPackery()},setPackery:function(a){this.$packery.each(function(){$(this).hasClass("packery--narrow")&&(a=0),$(this).packery({itemSelector:".js-packery-item",transitionDuration:"0s",gutter:45,columnWidth:a,columnHeight:45})})},layout:function(a){var b;b=a?a.data("packery"):this.$packery.data("packery"),b&&b.layout()},unsetPackery:function(){var a=this,b=this.$packery.data("packery");b&&a.$packery.packery("destroy")}},APP.article={$articleNav:$(".article-nav"),$navItem:$(".js-nav-item"),$toggleNav:$(".js-nav-toggle"),$readMore:$(".js-read-more"),$categoryButton:$(".js-article-category"),$categoryContainer:$(".js-article-category-container"),init:function(){return this.$articleNav.length?(this.nav(),this.readMore(),this.sourceLinks(),this.addThis(),void this.video()):!1},readMore:function(){this.$readMore.expander({moreClass:"read-more",lessClass:"read-less",slicePoint:80,widow:2,expandText:"more",expandPrefix:" ",expandEffect:"fadeIn",expandSpeed:250,collapseEffect:"fadeOut",collapseSpeed:200,userCollapseText:"less",userCollapsePrefix:""})},nav:function(){var a=this;this.$navItem.waypoint(function(b){if("down"===b){var c=$(this).attr("id");a.$articleNav.find(".is-current").removeClass("is-current"),$('a[href="#'+c+'"]').addClass("is-current")}},{offset:"2px"}),this.$navItem.waypoint(function(b){if("up"===b){var c=$(this).attr("id");a.$articleNav.find(".is-current").removeClass("is-current"),$('a[href="#'+c+'"]').addClass("is-current")}},{offset:"-2px"}),this.$toggleNav.click(function(){a.navToggle()}),imagesLoaded($(".article-image"),function(){a.$articleNav.waypoint("sticky",{wrapper:'<nav class="article-nav-wrapper" />',stuckClass:"is-sticky"})})},navToggle:function(){$(".article-nav").toggleClass("is-closed")},sourceLinks:function(){var a=".section",b=$("a",a);b.each(function(){var a=$(this).attr("href"),b=$(this).attr("title");null!=b&&$(this).after('<a href="'+a+'" class="source-link" target="_blank">'+b+"</a>")})},addThis:function(){},video:function(){var a=this,b=$(".js-video-link");return b.length?void b.click(function(b){b.preventDefault();var c=$(this).attr("data-video-id"),d=$(this).attr("data-video-type"),e=$(this).attr("data-video-width"),f=$(this).attr("data-video-height");a.replaceVideo($(this),c,d,e,f)}):!1},replaceVideo:function(a,b,c,d,e){var f=a.parent(),g='<div class="video js-fitvid"><iframe width="'+d+'" height="'+e+'" src="//player.vimeo.com/video/'+b+'?title=0&amp;byline=0&amp;portrait=0&amp;autoplay=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>',h='<div class="video js-fitvid"><iframe width="'+d+'" height="'+e+'" src="//www.youtube.com/embed/'+b+'?HD=1;rel=0;showinfo=0;autoplay=1" frameborder="0" allowfullscreen></iframe></div>';a.remove(),"youtube"==c?f.append(h):"vimeo"==c&&f.append(g)}},APP.smoothScroll=function(){$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=$(this.hash);if(a=a.length?a:$("[name="+this.hash.slice(1)+"]"),a.length)return $("html,body").animate({scrollTop:a.offset().top},"slow"),!1}})},APP.responsive={BREAKPOINT_SMALL:680,BREAKPOINT_MEDIUM:1080,BREAKPOINT_LARGE:1440,getCurrentBreakpoint:function(){var a=["small","medium","large"],b=0,c="small";do c=a[b];while(app.responsive.matchesBreakpoint(a[++b]));return c},matchesBreakpoint:function(a){switch(a){case"small":return document.documentElement.clientWidth>=this.BREAKPOINT_SMALL;case"medium":return document.documentElement.clientWidth>=this.BREAKPOINT_MEDIUM;case"large":return document.documentElement.clientWidth>=this.BREAKPOINT_LARGE}}},APP.requestAnimationFrame=function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})},APP.slider=function(){function a(a){function c(){w=APP.responsive.matchesBreakpoint("small")?300:120}function d(){p=a.width(),j.each(function(){$(this).width(p)}),i.width(p*q)}function e(a,b){if(i.removeClass("animate"),b&&i.addClass("animate"),z){var c=p*q/100*a;i.css("left",c+"px")}else B?i.css("transform","translate3d("+a+"%,0,0)"):C?i.css("transform","translate("+a+"%,0)"):i.css("left",this.px+"px")}function f(a){switch(a.gesture.preventDefault(),a.type){case"dragright":case"dragleft":var b=-(100/q)*r,c=100/p*a.gesture.deltaX/q;(0===r&&"right"==a.gesture.direction||r==q-1&&"left"==a.gesture.direction)&&(c*=.4),e(c+b);break;case"swipeleft":g.next(),a.gesture.stopDetect();break;case"swiperight":g.prev(),a.gesture.stopDetect();break;case"release":Math.abs(a.gesture.deltaX)>p/4?"right"==a.gesture.direction?g.prev():g.next():g.showPane(r,!0)}}var g=this,h=this;a=$(a);var i=$(">ul",a),j=$(">ul>li",a),k=($(".js-slider-container"),$(".js-cases-container")),l=$(".js-slide-cases"),m=$(".js-scroll-down"),n=$(".js-slide"),o=$(".slide",n),p=0,q=j.length,r=0,s=$(".js-slider-dot"),t=$(".js-slider-indicator"),u=$(".slider-control[data-direction=prev]"),v=$(".slider-control[data-direction=next]"),w=300,x=0,y=0,z=!1,A=!1,B=Modernizr.csstransforms3d,C=Modernizr.csstransforms,D=!1;this.init=function(){d(),c(),APP.helpers.chrome32()&&(z=!0),APP.helpers.stockAndroid()&&(A=!0),$(window).on("load resize orientationchange",function(){if(d(),c(),g.showPane(r,!0),location.hash){var a=document.URL.substr(document.URL.indexOf("#")+1);isNaN(a)&&(a=APP.helpers.cateogryToIndex(a)),g.showPane(a,!0),h.showCases(),h.updateNav(),h.changeState(),h.slideHeight()}}),D=APP.responsive.matchesBreakpoint("small")?!1:!0},this.showPane=function(a,b){a=Math.max(0,Math.min(a,q-1)),r=a;var c=-(100/q*r);e(c,b)},$(".slide").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(a){a.stopPropagation()}),$(".slide-bg").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(a){a.stopPropagation()}),i.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(a){h.showCases(),h.updateNav(),h.changeState(),h.slideHeight()}),this.next=function(){return this.showPane(r+1,!0)},this.prev=function(){return this.showPane(r-1,!0)},this.showCases=function(){5>r||r>12?(k.hide(),l.hide(),m.removeClass("is-visible")):(k.show(),l.hide(),$('.js-slide-cases[data-case-index="'+r+'"]').show(),m.addClass("is-visible"))},this.updateNav=function(){s.removeClass("is-current-dot"),s.each(function(a){a==r&&$(this).addClass("is-current-dot")}),t.html(r+1),r>0?u.show():u.hide(),q-1>r?v.show():v.hide()},this.changeState=function(){var a="Slide "+r;history.replaceState(null,a,"#"+r)},this.slideHeight=function(){$(".is-active-slide").each(function(){"0"!==$(this).attr("data-slide-index")&&$(this).removeClass("is-active-slide")}),n.each(function(a){a==r&&(x=$(this).height(),$(this).addClass("is-active-slide"))}),o.each(function(a){a==r&&(y=$(this).height())}),a.css("height","100%");var b=y+w-a.height();b>0&&a.css("height",a.height()+b)},Hammer.defaults.behavior.touchAction="pan-y";{var E={dragLockToAxis:!0};new Hammer(a[0],E).on("release dragleft dragright swipeleft swiperight",f)}$(".js-slider-control").on("click",function(a){a.preventDefault();var c=$(this).attr("data-direction");"next"==c?b.next():"prev"==c&&b.prev()}),$(".js-slider-dot").click(function(){var a=$(this).attr("data-dot-index");b.showPane(a,!0)}),$(document).keydown(function(a){37==a.keyCode?(a.preventDefault(),b.prev()):39==a.keyCode&&(a.preventDefault(),b.next())})}if($(".slider").length){var b=new a(".js-slider");b.init()}},APP.comments={commentsLoaded:!1,$comments:$(".js-comments"),$button:$(".js-comments-button"),init:function(){var a=this;return this.$comments.length?void(APP.responsive.matchesBreakpoint("medium")?a.waypointsListener():a.clickListener()):!1},waypointsListener:function(){var a=this;this.$comments.waypoint(function(b){"down"===b&&(a.loadComments(),$(".article-nav").addClass("is-closed"))},{offset:"90%"}),this.$comments.waypoint(function(a){"up"===a&&$(".article-nav").removeClass("is-closed")},{offset:"90%"})},clickListener:function(){var a=this;this.$button.click(function(b){b.preventDefault(),a.loadComments()})},loadComments:function(){var a=this;if(!this.commentsLoaded){var b="multiplejournalism";!function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="//"+b+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}(),a.commentsLoaded=!0}}},$(function(){Garp.locale=LANG,APP.controller.init()});